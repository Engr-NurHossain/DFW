@model HS.Entities.CustomerCompany
@using AppConfig = HS.Framework.Utils.AppConfig;

@{
    var IsSmart = false;
    var MailUrl = AppConfig.DomainSitePath + "/Leads/LeadConvertedToCustomerPDFMail/";
    var AgreeUrl = AppConfig.DomainSitePath + "/Leads/IAgreeSetup/";
    Layout = "~/Views/Shared/_PublicLayout.cshtml";
    List<HS.Entities.GlobalSetting> globalSetting = (List<HS.Entities.GlobalSetting>)ViewBag.CustomerUiSetting;
    if (globalSetting.Where(x => x.SearchKey == "LeadSmartSetUp").Count() > 0 && globalSetting.Where(x => x.SearchKey == "LeadSmartSetUp").FirstOrDefault().Value.ToLower() == "true")
    {
        IsSmart = true;
        MailUrl = AppConfig.DomainSitePath + "/SmartLeads/SmartLeadConvertedToCustomerPDFMail/";
        AgreeUrl = AppConfig.DomainSitePath + "/SmartLeads/SmartIAgreeSetup/";
    }
    var DocURL = HS.Framework.DESEncryptionDecryption.EncryptPlainTextToCipherText(ViewBag.LeadId + "#" + ViewBag.templateid + "#" + ViewBag.firstpage + "#" + ViewBag.ticketid + "#" + ViewBag.IsRecreate + "#" + ViewBag.isinvoice + "#" + ViewBag.invoiceid + "#" + true + "#" + ViewBag.isestimator + "#" + ViewBag.estid + "#" + ViewBag.userid + "#" + ViewBag.commercial + "#" + ViewBag.EstimatorId);
}
@using Localize = HS.Web.UI.Helper.LanguageHelper
@using System.Collections;
@section styles{
    @Styles.Render("~/styles/PublicAgreement")
}
@section scripts{
    <script>
        var AgreeUrlSetup = '@AgreeUrl';
        var ContractSubmit = '@ViewBag.IsContractSubmit';
        var CreateDocument = true;
        var IsMobile = '@Request.Browser.IsMobileDevice';
        var recreate = '@ViewBag.IsRecreate';
        var disamount = '@ViewBag.DiscountAmount';
        var clicked = false;
        var sigclicked = false;
        var globalval = parseInt('@ViewBag.AgreementDocumentHeight');
        var LeadConvertId = "@ViewBag.LeadId";
        var EstimatorId = "@ViewBag.EstimatorId";
        var codeagreement = '@ViewBag.Code';
        var templateid = '@ViewBag.templateid';
        var agreementtempid = '@ViewBag.templateid';
        var firstpage = '@ViewBag.firstpage';
        var commercial = '@ViewBag.commercial';
        var ticketid = '@ViewBag.ticketid';
        var isinvoice = '@ViewBag.isinvoice';
        var invoiceid = '@ViewBag.invoiceid';
        var isestimator = '@ViewBag.isestimator';
        var estid = '@ViewBag.estid';
        var userid = '@ViewBag.userid';
        var customertype = '@Model.Customer.Type';
        var issignuploaded = false;
        var NoQues = '@ViewBag.NoQuestion';
        var counter = 0;
        var IsAgreementQuestion = '@ViewBag.IsAgreementQuestion';
        var TabsLoaderText = "<div class='invoice-loader'><div><div class='lds-css ng-scope'><div style='margin:auto; z-index:99;' class='lds-double-ring'><div></div><div></div></div></div></div></div>";
        var docurl = '@DocURL';
    </script>
    @Scripts.Render("~/scripts/PublicAgreement")
}


@{
    Hashtable dataTemplate1 = new Hashtable();
    dataTemplate1.Add("ContractTerm", ViewBag.termid);
    dataTemplate1.Add("TermMonth", ViewBag.TermMonth);
}

@{
    if (Request.Browser.IsMobileDevice)
    {
        if (ViewBag.IsAgreementQuestion == "false")
        {
            <div id="body_id" class="mob-content">
                <div class="hidden LoadImgDiv">
                    <div class="lds-css ng-scope">
                        <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                    </div>
                </div>
                <div class="custom-body_id">
                    <div class="HeadContents">
                        <h4 class="sign-head">Sign Agreement</h4>
                    </div>
                    @if (Model != null && ViewBag.IsAgreement == false)
                    {
                        <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                            <button class="btnSign"><i class="fa fa-edit" aria-hidden="true"></i> Sign Document</button>
                        </div>
                        <div class="sign-document hidden">
                            <div class="wrapper">
                                <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                            </div>
                            @if (ViewBag.IsContractSubmit == true)
                            {
                                <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                            }
                            else
                            {
                                <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                            }
                            <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                        </div>
                        @*<div class="bodyConentsDiv1_mobile" id="AggrementDiv_mobile"></div>*@
                        <div class="bodyConentsDiv1_mobile_doc" id="">
                            <div style="padding-left:15px;">
                                <button class="btn green_button" id="view_pdf" onclick="LoadMobileAgreementViewMethod()"><i class="fa fa-eye"></i> View Agreement</button>
                                @if (ViewBag.agreementdoc == true)
                                {
                                    <button class="btn green_button" id="download_pdf" onclick="DownloadMobileAgreement()"><i class="glyphicon glyphicon-download-alt"></i></button>
                                }
                            </div>
                        </div>
                        <div class="footerContents-agreement">
                            <div class="DisclousureDiv hidden" style="float:left;padding-top:10px;padding-left:30px">
                                By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                            </div>
                            @if (ViewBag.IsContractSubmit == false)
                            {
                                <div style="float:left; display:table; margin-left: 30px;">
                                    <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                                </div>
                            }

                        </div>
                    }
                    else
                    {
                        <span> Link Expired!!!</span>
                    }
                </div>
            </div>
        }
        else
        {
            if (ViewBag.NoQuestion == false)
            {
                <div id="body_id" class="mob-content">
                    <div class="hidden LoadImgDiv_mobile">
                        <div class="lds-css ng-scope">
                            <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                        </div>
                    </div>
                    <div class="custom-body_id_mobile">
                        <div class="HeadContents">
                            @if (ViewBag.IsAgreement == false)
                            {
                                <h4 class="ques-head">Agreement Questionnaire</h4>
                            }
                            <h4 class="sign-head">Sign Agreement</h4>
                        </div>
                        @if (Model != null && ViewBag.IsAgreement == false)
                        {
                            if (Model.AgreementQuestion != null && Model.AgreementQuestion.Count > 0)
                            {
                                <div class="answer-content hidden">
                                    @foreach (var item in Model.AgreementQuestion)
                                    {
                                        if (item.QuestionId == 1)
                                        {
                                            <div class="row Ques1" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Yes</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns1 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns1 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        if (item.QuestionId == 3)
                                        {
                                            if (Model.Customer.Type.ToLower() == "commercial")
                                            {
                                                <div class="row ques2 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                            <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row YAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>Yes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row NAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>No</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row ques2 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>
                                                            <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Yes</button>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row YAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>Yes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row NAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>No</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                        if (item.QuestionId == 4)
                                        {
                                            <div class="row ques3 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        if (item.QuestionId == 5)
                                        {
                                            <div class="row ques4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;" class="last_div_agree">
                                                        @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns5 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns5 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    }
                                    <div class="row profile_message hidden">
                                        <div class="col-md-10">
                                            <span></span> <a href="javascript:void(0)" class="SwitchACHPayment_style hidden" id="SwitchACHPayment" data-id="" data-comid="" data-type=""> Click here for ACH info</a>
                                        </div>
                                        <div class="col-md-2">
                                            <div style="width:100%;padding-right: 15px;">
                                                <button type="button" class="btn red_button" id="btn_profile_no">No</button>
                                                <button type="button" class="btn green_button" id="btn_profile_yes">Yes</button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                            if (ViewBag.IsAgreement == true)
                            {
                                <span class="HeadContents">Link Expired</span>
                            }
                            else
                            {
                                <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                                    <button class="btnSign"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign Document</button>
                                </div>
                                <div class="sign-document hidden">
                                    <div class="wrapper">
                                        <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                                    </div>
                                    @if (ViewBag.IsContractSubmit == true)
                                    {
                                        <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                                    }
                                    else
                                    {
                                        <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                                    }
                                    <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                                </div>
                                @*<div class="bodyConentsDiv1_mobile" id="AggrementDiv_mobile"></div>*@
                                <div class="bodyConentsDiv1_mobile_doc" id="" style="padding-left:30px;">
                                    <div>
                                        <button class="btn green_button" id="view_pdf" onclick="LoadMobileAgreementViewMethod()"><i class="fa fa-eye"></i> View Agreement</button>
                                        @if (ViewBag.agreementdoc == true)
                                        {
                                            <button class="btn green_button" id="download_pdf" onclick="DownloadMobileAgreement()"><i class="glyphicon glyphicon-download-alt"></i></button>
                                        }
                                    </div>
                                </div>
                                <div class="footerContents-agreement">
                                    <div class="DisclousureDiv" style="float:left;padding-top:10px;padding-left:30px">
                                        By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                                    </div>
                                    @if (ViewBag.IsContractSubmit == false)
                                    {
                                        <div style="float:left; display:table; margin-left: 30px;">
                                            <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                                        </div>
                                    }

                                </div>
                            }

                        }
                        else
                        {
                            <span> Link Expired!!!</span>
                        }
                    </div>
                </div>
            }
            else
            {
                <div id="body_id" class="mob-content">
                    <div class="hidden LoadImgDiv">
                        <div class="lds-css ng-scope">
                            <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                        </div>
                    </div>
                    <div class="custom-body_id">
                        <div class="HeadContents">
                            <h4 class="sign-head">Sign Agreement</h4>
                        </div>
                        @if (Model != null && ViewBag.IsAgreement == false)
                        {
                            <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                                <button class="btnSign"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign Document</button>
                            </div>
                            <div class="sign-document hidden">
                                <div class="wrapper">
                                    <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                                </div>
                                @if (ViewBag.IsContractSubmit == true)
                                {
                                    <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                                }
                                else
                                {
                                    <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                                }
                                <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                            </div>
                            @*<div class="bodyConentsDiv1_mobile" id="AggrementDiv_mobile"></div>*@
                            <div class="bodyConentsDiv1_mobile_doc" id="" style="padding-left:30px;">
                                <div>
                                    <button class="btn green_button" id="view_pdf" onclick="LoadMobileAgreementViewMethod()"><i class="fa fa-eye"></i> View Agreement</button>
                                    @if (ViewBag.agreementdoc == true)
                                    {
                                        <button class="btn green_button" id="download_pdf" onclick="DownloadMobileAgreement()"><i class="glyphicon glyphicon-download-alt"></i></button>
                                    }
                                </div>
                            </div>
                            <div class="footerContents-agreement">
                                <div class="DisclousureDiv" style="float:left;padding-top:10px;padding-left:30px">
                                    By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                                </div>
                                @if (ViewBag.IsContractSubmit == false)
                                {
                                    <div style="float:left; display:table; margin-left: 30px;">
                                        <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                                    </div>
                                }

                            </div>
                        }
                        else
                        {
                            <span> Link Expired!!!</span>
                        }
                    </div>
                </div>
            }

        }
    }
    else
    {
        if (ViewBag.IsAgreementQuestion == "false")
        {
            <div id="body_id" class="desktop-content">
                <div class="hidden LoadImgDiv">
                    <div class="lds-css ng-scope">
                        <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                    </div>
                </div>
                <div class="custom-body_id">
                    <div class="HeadContents">
                        <h4 class="sign-head">Sign Agreement</h4>
                    </div>
                    @if (Model != null && ViewBag.IsAgreement == false)
                    {
                        <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                            <button class="btnSign"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign Document</button>
                        </div>
                        <div class="sign-document hidden">
                            <div class="wrapper">
                                <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                            </div>
                            @if (ViewBag.IsContractSubmit == true)
                            {
                                <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                            }
                            else
                            {
                                <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                            }

                            <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                        </div>
                        <div class="bodyConentsDiv1" id="AggrementDiv" style="overflow: scroll;height:435px;overflow-x: hidden;">
                            @if (IsSmart)
                            {
                                <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/SmartLeads/SmartInstallationAgreement/?url=@DocURL" style="overflow:hidden !important;height:1024px;" height="1024"></iframe>
                            }
                            else
                            {
                                <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/Leads/InstallationAgreement/?url=@DocURL"></iframe>
                            }
                        </div>
                        <div class="footerContents-agreement">
                            <div class="DisclousureDiv hidden" style="float:left;padding-top:10px;padding-left:30px">
                                By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                            </div>
                            <div style="float:right; display:table;">
                                <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                            </div>
                            </div>
                    }
                    else
                    {
                        <span> Link Expired!!!</span>
                    }
                </div>
            </div>
        }
        else
        {
            if (ViewBag.NoQuestion == false)
            {
                <div id="body_id" class="desktop-content">
                    <div class="hidden LoadImgDiv">
                        <div class="lds-css ng-scope">
                            <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                        </div>
                    </div>
                    <div class="custom-body_id">
                        <div class="HeadContents">
                            @if (ViewBag.IsAgreement == false)
                            {
                                <h4 class="ques-head">Agreement Questionnaire</h4>
                            }
                            <h4 class="sign-head">Sign Agreement</h4>
                        </div>
                        @if (Model != null && ViewBag.IsAgreement == false)
                        {
                            if (Model.AgreementQuestion != null && Model.AgreementQuestion.Count > 0)
                            {
                                <div class="answer-content hidden">
                                    @foreach (var item in Model.AgreementQuestion)
                                    {
                                        if (item.QuestionId == 1)
                                        {
                                            <div class="row Ques1" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Yes</button>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns1 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns1 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        if (item.QuestionId == 3)
                                        {
                                            if (Model.Customer.Type.ToLower() == "commercial")
                                            {
                                                <div class="row ques2 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                            <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row YAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>Yes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row NAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>No</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row ques2 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>
                                                            <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Yes</button>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row YAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>Yes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row NAns3 hidden" style="margin-left:15px;">
                                                    <div class="col-md-10">
                                                        <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div style="width:100%;padding-right: 15px;">
                                                            <span>No</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                        if (item.QuestionId == 4)
                                        {
                                            <div class="row ques3 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">

                                                        @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        if (item.QuestionId == 5)
                                        {
                                            <div class="row ques4 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;" class="last_div_agree">

                                                        @*<button type="button" class="btn red_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="false">No</button>*@
                                                        <button type="button" class="btn green_button btnYesNo" id="btnYesNo" idval-qustionId="@item.QuestionId" idval="true">Ok</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row YAns5 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>Yes</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row NAns5 hidden" style="margin-left:15px;">
                                                <div class="col-md-10">
                                                    <span>@HS.Web.UI.Helper.LabelHelper.ParserHelper(item.Title, dataTemplate1)</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div style="width:100%;padding-right: 15px;">
                                                        <span>No</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    }
                                    <div class="row profile_message hidden">
                                        <div class="col-md-10">
                                            <span></span> <a href="javascript:void(0)" class="SwitchACHPayment_style hidden" id="SwitchACHPayment" data-id="" data-comid="" data-type=""> Click here for ACH info</a>
                                        </div>
                                        <div class="col-md-2">
                                            <div style="width:100%;padding-right: 15px;">
                                                <button type="button" class="btn red_button" id="btn_profile_no">No</button>
                                                <button type="button" class="btn green_button" id="btn_profile_yes">Yes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                            if (ViewBag.IsAgreement == true)
                            {
                                <span class="HeadContents">Link Expired</span>
                            }
                            else
                            {
                                <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                                    <button class="btnSign"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign Document</button>
                                </div>
                                <div class="sign-document hidden">
                                    <div class="wrapper">
                                        <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                                    </div>
                                    @if (ViewBag.IsContractSubmit == true)
                                    {
                                        <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                                    }
                                    else
                                    {
                                        <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                                    }
                                    <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                                </div>
                                <div class="bodyConentsDiv1" id="AggrementDiv" style="overflow: scroll;height:435px;overflow-x: hidden;">
                                    @if (IsSmart)
                                    {
                                        <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/SmartLeads/SmartInstallationAgreement/?url=@DocURL" style="overflow:hidden !important;height:5736px;" height="5736"></iframe>
                                    }
                                    else
                                    {
                                        <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/Leads/InstallationAgreement/?url=@DocURL"></iframe>
                                    }
                                </div>
                                <div class="footerContents-agreement">
                                    <div class="DisclousureDiv" style="float:left;padding-top:10px;padding-left:30px">
                                        By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                                    </div>
                                    @if (ViewBag.IsContractSubmit == false)
                                    {
                                        <div style="float:right; display:table; padding-top:20px;">
                                            <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                                        </div>
                                            }
                                    </div>
                                    
                                    }

                        }
                        else
                        {
                            <span> Link Expired!!!</span>
                        }
                    </div>
                </div>
            }
            else
            {
                <div id="body_id" class="desktop-content">
                    <div class="hidden LoadImgDiv">
                        <div class="lds-css ng-scope">
                            <div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div>
                        </div>
                    </div>
                    <div class="custom-body_id">
                        <div class="HeadContents">
                            <h4 class="sign-head">Sign Agreement</h4>
                        </div>
                        @if (Model != null && ViewBag.IsAgreement == false)
                        {
                            <div class="sign-div" style="float:left;margin-bottom:10px;margin-left:30px; margin-top:10px;">
                                <button class="btnSign"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign Document</button>
                            </div>
                            <div class="sign-document hidden">
                                <div class="wrapper">
                                    <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
                                </div>
                                @if (ViewBag.IsContractSubmit == true)
                                {
                                    <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract and send</button>
                                }
                                else
                                {
                                    <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to contract</button>
                                }
                                <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                            </div>
                            <div class="bodyConentsDiv1" id="AggrementDiv" style="overflow: scroll;height:435px;overflow-x: hidden;">
                                @if (IsSmart)
                                {
                                    <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/SmartLeads/SmartInstallationAgreement/?url=@DocURL" style="overflow:hidden !important;height:1024px;" height="1024"></iframe>
                                }
                                else
                                {
                                    <iframe name="iframe" class="pdf-styles cus-pdf-style" id="iframePdf" src="@(AppConfig.DomainSitePath)/Leads/InstallationAgreement/?url=@DocURL"></iframe>
                                }
                            </div>
                            <div class="footerContents-agreement">
                                <div class="DisclousureDiv hidden" style="float:left;padding-top:10px;padding-left:30px">
                                    By signing this document, you agree to our <a href="/Disclousure?id=@Model.CompanyId" target="_blank" style="cursor:pointer; text-decoration:none;"><b>disclousure agreement</b></a>
                                </div>
                                @if (ViewBag.IsContractSubmit == false)
                                {
                                    <div style="float:right; display:table;">
                                        <button class="btnIAgree all_button" @*onclick="IAgree();"*@><i class="fa fa-check-square" aria-hidden="true"></i> Submit Document</button>
                                    </div>
                                }

                            </div>
                        }
                        else
                        {
                            <span> Link Expired!!!</span>
                        }
                    </div>
                </div>
            }

        }
    }
}
<div class="loadcontractsubmitandsend"></div>
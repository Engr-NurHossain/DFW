
@{
    Layout = null;
    List<HS.Entities.GlobalSetting> globalSetting = (List<HS.Entities.GlobalSetting>)ViewBag.CustomerUiSetting;
}
@model HS.Entities.Customer
@using AppConfig = HS.Framework.Utils.AppConfig;




@using Localize = HS.Web.UI.Helper.LanguageHelper
@using PermissionChekcer = HS.Web.UI.Helper.PermissionHelper
@using Permissions = HS.Framework.UserPermissions
<link href="~/Content/Css/CityStateZipAutoFill.css" rel="stylesheet" />
@Styles.Render("~/styles/AddCustomer")
<link href="~/Content/Bootstrap/MultipleSelect/bootstrap-select.css" rel="stylesheet" />
<link href="~/Content/Select2/select2.css" rel="stylesheet" /> 
<script src="~/Content/Js/CityStateZipAutoFill.js"></script>
<script src="~/Content/Js/Popups/AddCustomerDraft.js"></script>
@using System.Configuration


@{
    bool IsgrateCRm = false;
    bool IsDFW = false;
    string IsGrate = ConfigurationManager.AppSettings["IsGrateCrm"];
    if (IsGrate == "true")
    {
        IsgrateCRm = true;
    }
    else
    {
        string IsDFWS = ConfigurationManager.AppSettings["IsDFW"];
        if (IsDFWS == "true")
        {
            IsDFW = true;
        }
    }
}
<script src="~/Content/Js/Card/CardValidation.js"></script>
<script src="~/Content/Js/Site/Validation.js"></script>
<script src="~/Content/Select2/Select2.min.js"></script>
<script src="~/Content/Bootstrap/MultipleSelect/bootstrap-select.js"></script>
<script src="~/Scripts/CustomerSelect.js"></script>
<style>
  
 .scheduleoncontainer{
        display:flex !important;
    }

</style>
<script>
    var CustomerGuidId = '@Model.CustomerId';
    var GuidCustomer = '@Model.CustomerId';
    var CreditScoreVal = '@Model.CreditScore';
    var valuetab = '@ViewBag.SelectTab';
    var MonthlyMonitoringFeeVal = '@Model.MonthlyMonitoringFee';
    var cusSysId = '@Model.CustomerSystemId';
    var cussysCusid = '@Model.CustomerSystemCustomerId';
    var cussysComid = '@Model.CustomerSystemCompanyId';
    var CustomerFund = '@(Model.CustomerFunded)';
    var CustomerMaintenance = '@(Model.Maintenance)';
    var CustomerBilltax = '@(Model.BillTax)';
    var SalesTaxAmount = '@ViewBag.salesTaxAmount';
    var TaxAmount = parseFloat(SalesTaxAmount);
    var FundCompany = '@(Model != null?Model.FundingCompany :"")';
    var PaymentMethod = '@(Model != null?Model.PaymentMethod :"")';
    var BillingCycle = '@(Model != null?Model.BillCycle : "")';
    var BillingAmount = '@Model.BillAmount';
    var BillDay = '@Model.BillDay';
    var BillNote = '@Model.BillNotes';
    var StartDate = '@Model.JoinDate';
    var varlval = "";
    var IsGotoBill = '@ViewBag.IsGotoBill';
    var IsSystemInfo = '@ViewBag.IsSystemInfo';
    var IsAccountActivity = '@ViewBag.IsAccountActivity';
    var IsEmergency = '@ViewBag.IsEmergency';
    var paymentMethod = '@Model.PaymentMethod';
    var OutStandingBalance = '@Model.BillOutStanding';
    var ContactTerm = '@Model.ContractTeam';
    var Passcode = '@Model.Passcode';
    var cval;
    /*this one should be fixed*/
    var Nonval = $("#InorActivebtn").attr('idval');


    @*var cardnumval = '@string.Concat("".PadLeft(12, '*'), (((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber).Substring((((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber).Length - 4))';*@
    var LoadEmergencyContactList = function () {
        $("#EmergencyContactList").load(domainurl + "/Customer/CustomerEmergencyContactListPartial?Id=" + CustomerGuidId);
    }
    var LoadAddNewEmergencyContactDiv = function () {
        $("#AddNewEmgContactPartial").show();
        $("#AddNewEmgContactPartial").load(domainurl + "/Customer/AddCustomerEmergencyContact?EmgConId=" + CustomerGuidId + "&EmgId=0");
    }
    var EditEmergencyContactDiv = function (emgId) {
        $("#AddNewEmgContactPartial").show();
        $("#AddNewEmgContactPartial").load(domainurl + "/Customer/AddCustomerEmergencyContact?EmgConId=" + CustomerGuidId + "&EmgId=" + emgId);
    }
    var SetSecCuNo = function () {
        $("#SecondCustomerNo").val();
    }
    var SetFCuNo = function () {
        $("#CustomerNum").val();
    }
    var SetAddCuNo = function () {
        $("#AdditionalCustomerNo").val();
    }
    var FixAddCustomerWrapperHeight = function () {
        var CustomHeight = window.height - $('.cus-section').height() - 20;
        if(Device.MobileGadget()){
            CustomHeight = window.height - $('.cus-section').height() + 42;
        }
        $(".add_customer_wrapper").height(CustomHeight);
    }
    var HideNewEmgContactPartial = function () {
        $("#AddNewEmgContactPartial").hide();
    }
    var FunctionActiveOrInactiveCustomer = function (cval) {
        $.ajax({
            url: domainurl + "/Customer/ConvertInactiveOrActiveCustomer/",
            data: { Nonval, cval },
            type: "Post",
            dataType: "Json",
            success: function (data) {
                if (data.res == true) {
                    CloseTopToBottomModal();
                    parent.LoadCustomerDetail(data.Customerid, true);
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        })
    }
    var DeleteCustomerById = function (customerid) {
        $.ajax({
            url: domainurl + "/Customer/DeleteCustomer",
            data: { Id: customerid },
            type: "Post",
            dataType: "Json",
            success: function (data) {
                if (data.result) {
                    OpenSuccessMessageNew ("Success!", "Customer deleted successfully!");
                    CloseTopToBottomModal();
                    LoadCustomer(true);
                } else {
                    OpenErrorMessageNew("Error!", data.message);
                }
            }
        });
    }
    var LoadScheduleCalendar = function () {
        //GuidCustomer = $('#CustomerList').val();
        //console.log(GuidCustomer);
        var Param = {
            "Id": $("#Ticket_Id").val(),
            "TicketId": $("#Ticket_TicketId").val(),
            "Subject": $("#Ticket_Subject").val(),
            "Status": $("#Ticket_Status").val(),
            "CustomerId": $("#CustomerList").val(),
            "TicketType": $("#Ticket_TicketType").val(),
            "CompletionDate": GetTimeFormat($("#Ticket_CompletionDate").val()),
            "AppointmentStartTime": $("#AppointmentStartTime").val(),
            "AppointmentEndTime": $("#AppointmentEndTime").val(),
        };
        var url = domainurl + "/Ticket/SaveTicketSession";
        $.ajax({
            type: "POST",
            ajaxStart: function () { },
            url: url,
            data: JSON.stringify(Param),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            success: function (data) {
                if (data.result) {
                    var pathname = window.location.pathname.toLowerCase();
                    if (pathname == '/scheduleinfo') {
                        window.location.href = "/ScheduleInfo?date=" + $("#Ticket_CompletionDate").val() + "&viewtype=" + "Daily" + "&TicketId=" + $("#Ticket_Id").val() + "&CustomerId=" + GuidCustomer;
                    }
                    else {
                        window.location.href = "/calendar?ticketdate=" + $("#Ticket_CompletionDate").val() + "&ticketid=" + $("#Ticket_Id").val() + "&customerid=" + GuidCustomer;
                    }
                }
                else {
                    OpenErrorMessageNew("Error!", data.message);
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        });
    }
    $(document).ready(function () {
        $("#btnSchedule").click(function () {
            LoadScheduleCalendar();
        })
        var CompletionDatepicker = new Pikaday({
            field: $('#Ticket_CompletionDate')[0],
            format: 'MM/DD/YYYY'
        });
        $('.selectpicker').selectpicker();
        if('@Model.BillDay.HasValue'){
            $("#BillDay").val(@Model.BillDay);
        }
       
        $("#btnQa1").click(function () {
            OpenTopToBottomModal(domainurl + "/Customer/QA1QuestionariePartial?id=" + @Model.Id);
        })
        $("#btnQa2").click(function () {
            OpenTopToBottomModal(domainurl + "/Customer/QA2QuestionariePartial?id=" + @Model.Id);
        })
        $("#btnTech").click(function() {
            OpenTopToBottomModal(domainurl + "/Customer/LeadTechCallPartial?id=" + @Model.Id);
        })
        var cancelBodyTemplate = "Reason:" + "<textarea>" + "</textarea>";
        var cancelHeaderTemplate = "@(Localize.T("Cancel Customer"))!";
        $("#InorActivebtn").click(function () {
            if ('@Model.IsActive' == "True") {
                OpenCancelCustomer(cancelHeaderTemplate, cancelBodyTemplate, function(){
                    cval = $("#CustomerCancel").val();
                    if(cval != ""){
                        FunctionActiveOrInactiveCustomer(cval)
                    }
                    else{
                        OpenErrorMessageNew("Error!","Please write reason to rolled over customer", "");
                    }
                })
            }
            else {
                OpenConfirmationMessageNew("Confirm?", "Are you want to activate customer?", function () {
                    FunctionActiveOrInactiveCustomer("true");
                });
            }
        })
        FixAddCustomerWrapperHeight();
        if (FundCompany != null && FundCompany != '') {
            $("#FundingCompany").val(FundCompany);
        }
        if (CustomerFund != '') {
            var Fundval = CustomerFund == "True" ? '1' : '0';
            $("#CustomerFunded").val(Fundval);
        }
        if (CustomerMaintenance != '') {
            var Mainval = CustomerMaintenance == "True" ? '1' : '0';
            $("#Maintenance").val(Mainval);
        }
        if (CustomerBilltax != '') {
            var Taxval = CustomerBilltax == "True" ? '1' : '0';
            CustomerBilltax = Taxval;
        }
        if (CreditScoreVal != '') {
            $("#CreditScore").val(CreditScoreVal);
        }
        if (MonthlyMonitoringFeeVal != '') {
            $("#MonthlyMonitoringFee").val(MonthlyMonitoringFeeVal);
        }
        $(".customer-system-info").load(domainurl + "/Customer/CustomerSystemInfoPartial?id=" + cusSysId + "&CusID=" + cussysCusid + "&ComID=" + cussysComid);

        $(document).click(function () {
            setTimeout(function () {
                $(".customerNoSuggestion").hide();
                $(".customerNoSuggestion2").hide();
                $(".customerNoSuggestion3").hide();
            }, 200);
        })

        if (PaymentMethod != null && PaymentMethod != '') {
            $("#PaymentMethod").val(PaymentMethod);
        }
        if (BillingCycle != null && BillingCycle != '') {
            $("#BillCycle").val(BillingCycle);
        }
        if (valuetab != "") {
            $('.previousAddress').find('a').trigger("click");
        }

        LoadEmergencyContactList();
        $("#btnCustomerAddNewEmgContact").click(function () {
            LoadAddNewEmergencyContactDiv();
        });
        $("#DeleteThisCustomer").click(function () {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this customer?", function () {
                DeleteCustomerById(CustomerGuidId)
            });
        });
        setTimeout(function () {
            if (IsGotoBill == '1') {
                $("#CustoerEditNav").find('ul').find('li#GoToBill').addClass('active').find('a').get(0).click();
            }
        }, 200);
        setTimeout(function () {
            if (IsSystemInfo == '1') {
                $("#CustoerEditNav").find('ul').find('li#GoToSystem').addClass('active').find('a').get(0).click();
            }
        }, 200);
        setTimeout(function () {
            if (IsAccountActivity == '1') {
                $("#CustoerEditNav").find('ul').find('li#GoAccountActivity').addClass('active').find('a').get(0).click();
            }
        }, 200);
        setTimeout(function () {
            if (IsEmergency == '1') {
                $("#CustoerEditNav").find('ul').find('li#GoEmergency').addClass('active').find('a').get(0).click();
            }
        }, 200);
        $('#CustoerEditNav a').click(function (item) {
            $('#CustoerEditNav li').removeClass('active');
            $($(item.target).parent()).addClass('active');
        });
        $(".add_customer_wrapper").on("scroll", function () {
            var windscroll = $(".add_customer_wrapper").scrollTop();
            $('#CustoerEditNav a').each(function (i) {
                if ($($(this).attr("href")).position().top <= 85) {
                    $('#CustoerEditNav li').removeClass('active');
                    $('#CustoerEditNav li').eq(i).addClass('active');
                }
            });
        });
        $("body").on('click', function (evt) { 
            console.log('Add Customer draft body click');
            var clickClass = $(evt.target || evt.srcElement).attr("class");
            if (clickClass != "add_customer_top_menu_drop" && clickClass!="fa fa-bars") {
                $(".add_customer_top_menu_drop").animate({
                    left: "-100%"
                }, 300, function () {
                    $(".add_customer_top_menu_drop").hide();
                });
            }
        });
        $(".add_customer_top_menu_btn").click(function(){
            $(".add_customer_top_menu_drop").animate({
                left: "0"
            }, 300, function () {
                $(".add_customer_top_menu_drop").show();
            });
        });
    })
</script>

@{
    HS.Entities.SetupAlarm Alarm = ViewBag.SetupAlarm;
}
<div class="hidden" style="display:none;visibility:hidden;height:0px;">
    <input type="hidden" id="Ticket_Id" value="@Model.Ticket.Id" />
    <input type="hidden" id="CustomerList" value="@Model.CustomerId" />
    <input type="hidden" id="Ticket_TicketId" value="@Model.Ticket.TicketId" />
    <input type="hidden" id="UploadedPath" value="" />
    <input type="file" name="CustomerFile" class="" id="UploadedFile" />
    <textarea class="hidden" id="BodyVal">@Model.Ticket.Message</textarea>
</div>
<div class="add_customer_wrapper">
    <div class="container contents ">

        @Html.HiddenFor(x => x.Id, new { id = "id" })

        <input type="hidden" value="@ViewBag.SelectTab" id="TabValue" />
        <div class="col-xs-12 add_customer_top_menu_device">
            <div class="add_customer_pop_up_top_menu_container">
                <div class="add_customer_pop_up_top_menu">
                    <button class="add_customer_top_menu_btn"><i class="fa fa-bars"></i></button>
                </div>
                <div class="add_customer_top_menu_drop">
                    <div class="contactInformation"><a href="#contactInformation">@Localize.T("Contact Information")</a></div>
                    @if (globalSetting.Where(x => x.SearchKey == "SystemInfoTab").FirstOrDefault().Value == "true")
                    {
                        <div class="accountInformation" id="GoToSystem"><a href="#accountInformation">@Localize.T("System Info")</a></div>
                    }
                    <div class="accountActivity" id="GoAccountActivity"><a href="#accountActivity">@Localize.T("Account Activity")</a></div>
                    @if (globalSetting.Where(x => x.SearchKey == "ThirdPartyIntegrationTab").FirstOrDefault().Value == "true")
                    {
                        <div class=""><a href="#note">@Localize.T("Third Party Integration")</a></div>
                    }
                    <div class="previousAddress" id="GoToBill"><a href="#previousAddress">@Localize.T("Billing/Funding")</a></div>
                    <div class="Other" id="GoEmergency"><a href="#Other">@Localize.T("Emergency Contacts")</a></div>
                </div>
            </div>

            @{
                if (Model.Id > 0)
                {
                    <span class="add-customer-title">@Localize.T("Edit Customer")</span>
                }
                else
                {
                    <span class="add-customer-title">@Localize.T("Create New Customer")</span>
                }
            }
            @*<div class="CloseButtonDiv" onclick="parent.ClosePopup()">
                    <img src="~/Content/Icons/cross_update.png" />
                </div>*@
        </div>
        <input type="hidden" value="@ViewBag.Alarmid" id="Idalarm" />
        <input type="hidden" value="@ViewBag.Moniid" id="Idmoni" />
        <input type="hidden" value="@ViewBag.Centralid" id="Idcentral" />
        <input type="hidden" value="@ViewBag.Alarmcusid" id="Cusalarm" />
        <input type="hidden" value="@ViewBag.Monicusid" id="Cusmoni" />
        <input type="hidden" value="@ViewBag.Centralcusid" id="Cuscentral" />
        <input type="hidden" value="@Model.AuthorizeRefId" id="AuthorizeRefId" />
        <div class="tab-contents width-100p custom_margin_top ac_nav">
            <nav class="navbar navbar-default navbar-fixed-top add_customer_pop_up_hide_device">
                <div class="contents">
                    <div class="navbar-collapse" id="CustoerEditNav">
                        <ul class="nav navbar-nav">
                            <li class="liitem popup_custom_width contactInformation"><a href="#contactInformation">@Localize.T("Contact Information")</a></li>

                            @if (globalSetting.Where(x => x.SearchKey == "SystemInfoTab").FirstOrDefault().Value == "true")
                            {
                                <li class="liitem popup_custom_width accountInformation" id="GoToSystem"><a href="#accountInformation">@Localize.T("System Info")</a></li>
                            }
                            <li class="liitem popup_custom_width accountActivity" id="GoAccountActivity"><a href="#accountActivity">@Localize.T("Account Activity")</a></li>
                            @if (globalSetting.Where(x => x.SearchKey == "ThirdPartyIntegrationTab").FirstOrDefault().Value == "true")
                            {
                                <li class="liitem popup_custom_width"><a href="#note">@Localize.T("Third Party Integration")</a></li>
                            }
                            <li class="liitem popup_custom_width previousAddress" id="GoToBill"><a href="#previousAddress">@Localize.T("Billing/Funding")</a></li>
                            <li class="liitem popup_custom_width Other" id="GoEmergency"><a href="#Other">@Localize.T("Emergency Contacts")</a></li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div id="wrapper-section" class="ac_device_margin">
                <div id="contactInformation" class="container-fluid">
                    <span class="width-100p sub-header">
                        @Localize.T("Customer Information")
                    </span>
                    <div class="customer_info_container">
                        <div class="customer_info_content">
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("First Name")<span class="red">*</span></span>
                                @Html.TextBoxFor(x => x.FirstName, new { @class = "form-control", placeholder = "First Name", datarequired = "true", id = "FirstName" })
                                @*<label rel="FirstName" class="label hidden red position-absolute">Localize.T("First Name Required")</label>*@
                            </div>
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Last Name")</span>
                                @Html.TextBoxFor(x => x.LastName, new { @class = "form-control", placeholder = "Last Name", id = "LastName" })
                                @*<label rel="LastName" class="label hidden red position-absolute">Localize.T("Last Name Required")</label>*@
                            </div>
                            @if (globalSetting.Where(x => x.SearchKey == "DoingBusinessAs").FirstOrDefault().Value.ToLower() == "true")
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Doing Business As")</span>
                                    @Html.TextBoxFor(x => x.DBA, new { @class = "form-control", placeholder = "DBA" })
                                </div>
                            }
                            @*@if (!IsgrateCRm)
                                {*@
                            @if (globalSetting.Where(x => x.SearchKey == "CSAccountNumber").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("CS Account Number")</span>
                                    @Html.TextBoxFor(x => x.CustomerNo, new { @class = "form-control", placeholder = "Customer No", id = "CustomerNum" })
                                    <div class="customerNoSuggestion" style="position: absolute;background: white;width: 135px;border: 1px solid #ccc;padding: 6px;display:none">

                                    </div>
                                </div>
                            }
                            @if (globalSetting.Where(x => x.SearchKey == "SecondaryAcNo").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Secondary Ac. NO.")</span>
                                    @Html.TextBoxFor(x => x.SecondCustomerNo, new { @class = "form-control", placeholder = "Second Customer No.", id = "SecondCustomerNo" })
                                    <div class="customerNoSuggestion2" style="position: absolute;background: white;width: 135px;border: 1px solid #ccc;padding: 6px;display:none">

                                    </div>
                                </div>
                            }
                            @if (globalSetting.Where(x => x.SearchKey == "AdditionalAcNo").FirstOrDefault().Value.ToLower() == "true")
                            {
                                <div class="form-group clearfix add_ac_no">
                                    <span class="span-style">@Localize.T("Additional Ac. No.")</span>
                                    @Html.TextBoxFor(x => x.AdditionalCustomerNo, new { @class = "form-control", placeholder = "Additional Customer No.", id = "AdditionalCustomerNo" })
                                    <div class="customerNoSuggestion3">

                                    </div>
                                </div>
                            }
                            @*//}*@
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Email Address")
                                    @if (Model.EmailVerified == true)
                                    {
                                        <span title="" style="color: #2ca01c;"> <i class="fa fa-check-circle-o"></i></span>

                                    }
                                    else if (Model.EmailVerified == false && !string.IsNullOrEmpty(Model.EmailAddress))
                                    {
                                        <span title="" style="color: #d9534f;"> <i class="fa fa-times-circle-o"></i></span>
                                       
                                    }
                                </span>
                                @Html.TextBoxFor(x => x.EmailAddress, new { @class = "form-control", placeholder = "Email Address", id = "EmailAddress" })
                            </div>
                            @*@if (!IsgrateCRm)
                                {*@
                            @if (globalSetting.Where(x => x.SearchKey == "BusinessAcType").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Business Ac. Type")</span>
                                    @Html.DropDownListFor(x => x.BusinessAccountType, ViewBag.BussinessAccountType as List<SelectListItem>, new { @class = "form-control", id = "BusinessAccountType" })
                                </div>
                            }
                            @*}*@
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Phone No")</span>
                                @Html.TextBoxFor(x => x.PrimaryPhone, new { @class = "form-control", placeholder = "xxx-xxx-xxxx", id = "PrimaryPhone" })
                            </div>
                            @if (IsDFW)
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Ownership")</span>
                                    @Html.DropDownListFor(x => x.Ownership, (List<SelectListItem>)ViewBag.OwnerShipList, new { @class = "form-control", id = "Ownership" })
                                </div>
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Purchase Price")</span>
                                    @Html.TextBoxFor(x => x.PurchasePrice, new { @class = "form-control", placeholder = "", id = "PurchasePrice" })
                                </div>
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Contract Value")</span>
                                    @Html.TextBoxFor(x => x.ContractValue, new { @class = "form-control", placeholder = "", id = "ContractValue" })
                                </div>
                            }

                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Business Name")</span>
                                <input type="text" class="form-control" value="@Model.BusinessName" placeholder="Business Name" id="BusinessName" datarequired="@(Model.Type=="Commercial"?"true":"false")" />
                            </div>
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Type")</span>
                                @Html.DropDownListFor(x => x.Type, (List<SelectListItem>)ViewBag.CustomerTypeList, new { @class = "form-control", id = "Type" })
                            </div>
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Lead Source")</span>
                                @Html.DropDownListFor(x => x.LeadSource, (List<SelectListItem>)ViewBag.SourceLead, new { @class = "form-control", placeholder = "Lead Source", id = "LeadSource" })
                            </div>
                            @if (globalSetting.Where(x => x.SearchKey == "SalesPerson").FirstOrDefault().Value.ToLower() == "true")
                            {
                                <div class="form-group clearfix">
                                    <span class="span-style">@Localize.T("Sales Person")</span>
                                    @Html.DropDownListFor(x => x.Soldby, (List<SelectListItem>)ViewBag.SalesPersonList, new { @class = "form-control", placeholder = "Lead Source", id = "SoldBy" })
                                </div>
                            }
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Secondary Number")</span>
                                @Html.TextBoxFor(x => x.SecondaryPhone, new { @class = "form-control", placeholder = "xxx-xxx-xxxx", id = "SecondaryPhone" })
                            </div>
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Cell Number")</span>
                                @Html.TextBoxFor(x => x.CellNo, new { @class = "form-control", placeholder = "xxx-xxx-xxxx", id = "CellNo" })
                            </div>
                            <div class="form-group clearfix">
                                <span class="span-style">@Localize.T("Referring Customer")</span>
                                @Html.DropDownList("CustomerList", (List<SelectListItem>)ViewBag.CustomerList, new { @class = "form-control dropdown_customar", id = "Ref_customer" })
                            </div>

                        </div>
                        <div class="form-group clearfix width-100p">
                            <span class="span-style">@Localize.T("Note")</span>
                            @Html.TextAreaFor(x => x.Note, new { @class = "form-control", placeholder = "Note", id = "Note" })
                        </div>
                        <hr class="custom-hr-style2">
                        <div class="tab-contents width-100p">
                            <div class="customer-information-left-div">
                                <span class="width-100p sub_header_inner">
                                    @Localize.T("Site Address")
                                </span>

                                <div class="form-group clearfix width-100p">
                                    <span class="span-style">@Localize.T("Street")</span>
                                    @Html.TextBoxFor(x => x.Street, new { @class = "form-control", placeholder = "Street Address", id = "Street" })
                                </div>
                                <div class="width-100p site_address_add_div">
                                    <div class="form-group clearfix width-33p CityState_insert_div">
                                        <span class="span-style">@Localize.T("Zip Code")</span>
                                        <input type="text" class="form-control" onkeydown="CityStateSearchKeyDown(this,event)" onkeyup="CityStateSearchKeyUp(this,event)" value="@Model.ZipCode" id="ZipCode" placeholder="Zip Code" />
                                        <div class='tt-menu'>
                                            <div class='tt-dataset tt-dataset-autocomplete'> </div>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("City")</span>
                                        @Html.TextBoxFor(x => x.City, new { @class = "form-control", placeholder = "City", id = "City", style = "text-transform:capitalize" })
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("State")</span>
                                        @Html.TextBoxFor(x => x.State, new { @class = "form-control", id = "State", style = "width:100%" })
                                    </div>
                                </div>
                                <div class="width-100p site_address_add_div">
                                    @if (globalSetting.Where(x => x.SearchKey == "StreetType").FirstOrDefault().Value.ToLower() == "true")
                                    {
                                        <div class="form-group clearfix width-33p">
                                            <span class="span-style">@Localize.T("Street Type")</span>
                                            @Html.DropDownListFor(x => x.StreetType, ViewBag.LeadStreetType as List<SelectListItem>, new { @class = "form-control" })
                                        </div>
                                    }
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Apt/Suit")</span>
                                        @Html.TextBoxFor(x => x.Appartment, new { @class = "form-control", placeholder = "Appartment" })
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Cross Street")</span>
                                        @Html.TextBoxFor(x => x.CrossStreet, new { @class = "form-control", placeholder = "CrossStreet" })
                                    </div>
                                </div>
                            </div>
                            <div class="customer-information-right-div">
                                <span class="width-100p sub_header_inner">
                                    @Localize.T("Billing Address (If different from physical address)")
                                </span>
                                <div class="form-group clearfix width-100p">
                                    <span class="span-style">@Localize.T("Street")</span>
                                    @Html.TextBoxFor(x => x.StreetPrevious, new { @class = "form-control", placeholder = "Street Address" })
                                </div>
                                <div class="width-100p site_address_add_div">
                                    <div class="form-group clearfix width-33p CityState_insert_div_previous">
                                        <span class="span-style">@Localize.T("Zip Code")</span>
                                        <input type="text" class="form-control" onkeydown="CityStateSearchKeyDown(this,event)" onkeyup="CityStateSearchKeyUp(this,event)" value="@Model.ZipCodePrevious" id="ZipCodePrevious" placeholder="Zip Code" />
                                        <div class='tt-menu'>
                                            <div class='tt-dataset tt-dataset-autocomplete'> </div>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("City")</span>
                                        @Html.TextBoxFor(x => x.CityPrevious, new { @class = "form-control", placeholder = "City", style = "text-transform:capitalize" })
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("State")</span>
                                        @Html.TextBoxFor(x => x.StatePrevious, new { @class = "form-control", id = "StatePrevious", style = "width:100%", placeholder = "State" })
                                    </div>
                                    @if (globalSetting.Where(x => x.SearchKey == "CustomerDefaultTicketUI").FirstOrDefault().Value == "true")
                                    {
                                        <div class="form-group clearfix width-50p">
                                            <span class="span-style">@Localize.T("Schedule On")</span>
                                            <div class="scheduleoncontainer">
                                                <input type="text" style="border-radius: 5px 0px 0px 5px;" id="Ticket_CompletionDate" class="form-control" placeholder="Schedule On" value="@(Model.Ticket.CompletionDate == new DateTime() ? "" : Model.Ticket.CompletionDate.ToString("MM/dd/yy"))">
                                                <button class="btn" style="border-radius: 0px 5px 5px 0px;" id="btnSchedule"><i class="fa fa-calendar" aria-hidden="true" style="cursor:pointer;"></i></button>
                                            </div>
                                        </div>
                                        <div class="form-group clearfix width-50p">
                                            <span class="span-style">@Localize.T("Assign To")</span>
                                            @Html.DropDownList("AssignedTo", ViewBag.AssignedEmployee as List<SelectListItem>, new { @class = "form-control selectpicker", @multiple = "multiple" })
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if (globalSetting.Where(x => x.SearchKey == "SystemInfoTab").FirstOrDefault().Value == "true")
                {
                    <div id="accountInformation" class="container-fluid">
                        <div class="customer-system-info">

                        </div>
                    </div>
                }
                <div id="accountActivity" class="container-fluid">
                    <span class="width-100p sub-header">
                        @Localize.T("Account Activity Information")
                    </span>
                    <div class="customer_info_container">
                        <div class="width-100p">
                            <div class="form-group clearfix width-33p">
                                <span class="span-style">@Localize.T("Sales Date")</span>
                                @Html.TextBoxFor(x => x.SalesDate, "{0:MM/dd/yy}", new { @class = "form-control sales-datepicker", Placeholder = "Select Sales Date", id = "SalesDate" })
                            </div>
                            <div class="form-group clearfix width-33p">
                                <span class="span-style">@Localize.T("Sold By")</span>
                                @Html.DropDownListFor(x => x.Soldby, (List<SelectListItem>)ViewBag.SalesPersonList, new { @class = "form-control", Placeholder = "Sold By", id = "SoldBy", style = "width:100%" })
                            </div>
                            <div class="form-group clearfix width-33p">
                                <span class="span-style">@Localize.T("Install Date")</span>
                                @Html.TextBoxFor(x => x.InstallDate, "{0:MM/dd/yy}", new { @class = "form-control install-datepicker", Placeholder = "Install Date", id = "InstallDate" })
                            </div>
                        </div>
                        <div class="width-100p">
                            @if (globalSetting.Where(x => x.SearchKey == "Cut-in-date").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix width-33p">
                                    <span class="span-style">@Localize.T("Cut-in Date")</span>
                                    @Html.TextBoxFor(x => x.CutInDate, "{0:MM/dd/yy}", new { @class = "form-control cut-datepicker", Placeholder = "Cut-in Date", id = "CutInDate" })
                                </div>
                            }
                            <div class="form-group clearfix width-33p">
                                <span class="span-style">@Localize.T("Installer")</span>
                                @Html.DropDownListFor(x => x.Installer, (List<SelectListItem>)ViewBag.InstallerList, new { @class = "form-control", Placeholder = "Installer Name", id = "Installer", style = "width:100%" })
                            </div>
                            @if (globalSetting.Where(x => x.SearchKey == "FundingDate").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix width-33p">
                                    <span class="span-style">@Localize.T("Funding Date")</span>
                                    @Html.TextBoxFor(x => x.FundingDate, "{0:MM/dd/yy}", new { @class = "form-control funding-datepicker", Placeholder = "Funding Date", id = "FundingDate" })
                                </div>
                            }
                        </div>
                        @if (globalSetting.Where(x => x.SearchKey == "QAFields").FirstOrDefault().Value == "true")
                        {
                            <div class="width-100p">
                                <div class="form-group clearfix width-50p">
                                    <span class="span-style">@Localize.T("QA1")</span>
                                    @Html.DropDownListFor(x => x.QA1, (List<SelectListItem>)ViewBag.QualityAssuranceList1, new { @class = "form-control", id = "QA1", style = "width:100%" })
                                </div>
                                <div class="form-group clearfix width-49p">
                                    <span class="span-style">@Localize.T("QA2")</span>
                                    @Html.DropDownListFor(x => x.QA2, (List<SelectListItem>)ViewBag.QualityAssuranceList2, new { @class = "form-control", id = "QA2", style = "width:100%" })
                                </div>
                            </div>
                            <div class="width-100p">
                                <div class="form-group clearfix width-50p">
                                    <span class="span-style">@Localize.T("QA1 Date")</span>
                                    @Html.TextBoxFor(x => x.QA1Date, "{0:MM/dd/yy}", new { @class = "form-control QA1datepicker", id = "QA1Date" })
                                </div>
                                <div class="form-group clearfix width-49p">
                                    <span class="span-style">@Localize.T("QA2 Date")</span>
                                    @Html.TextBoxFor(x => x.QA2Date, "{0:MM/dd/yy}", new { @class = "form-control QA2datepicker", id = "QA2Date" })
                                </div>
                            </div>
                        }
                        <div class="width-100p">
                            <div class="form-group clearfix width-25p add_customer_check_device">
                                <label><input type="checkbox" id="PreferedSms" @((Model.PreferedSms.HasValue && Model.PreferedSms.Value) ? "checked" : "") /> @Localize.T("SMS Subscription")</label>
                            </div>
                            @if (globalSetting.Where(x => x.SearchKey == "SignedAgreement").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix width-25p add_customer_check_device">
                                    <label><input type="checkbox" id="IsAgreement" @((Model.IsAgreement.HasValue && Model.IsAgreement.Value) ? "checked" : "") /> @Localize.T("Sign Agreement")</label>
                                </div>
                            }
                            @if (globalSetting.Where(x => x.SearchKey == "FireAccount").FirstOrDefault().Value == "true")
                            {
                                <div class="form-group clearfix width-25p add_customer_check_device">
                                    <label><input type="checkbox" id="IsFireAccount" @((Model.IsFireAccount.HasValue && Model.IsFireAccount.Value) ? "checked" : "") /> @Localize.T("Fire Account")</label>
                                </div>
                            }
                            <div class="form-group clearfix width-25p add_customer_check_device">
                                <label><input type="checkbox" id="PreferedEmail" @((Model.PreferedEmail.HasValue && Model.PreferedEmail.Value) ? "checked" : "") /> @Localize.T("Email Subscription")</label>
                            </div>
                        </div>
                    </div>
                </div>
                @if (globalSetting.Where(x => x.SearchKey == "ThirdPartyIntegrationTab").FirstOrDefault().Value == "true")
                {
                    <div id="note" class="container-fluid">
                        <span class="width-100p sub-header">
                            @Localize.T("Third Party Login Information")
                        </span>
                        <div class="customer_info_container">
                            <ul class="nav nav-tabs add_customer_third_party_nav">
                                <li class="active popup_custom_width_submenu"><a data-toggle="tab" href="#alarmdotcom">@Localize.T("Alarm.com Account.")</a> </li>
                                <li class="popup_custom_width_submenu"><a data-toggle="tab" href="#moniacc">@Localize.T("Monitronics Account")</a></li>
                                <li class="popup_custom_width_submenu"><a data-toggle="tab" href="#centralacc">@Localize.T("Central Station Account")</a></li>
                                <li class="popup_custom_width_submenu"><a data-toggle="tab" href="#TransUnion">@Localize.T("TransUnion")</a></li>
                            </ul>
                            <div class="tab-content">
                                <div id="alarmdotcom" class="tab-pane fade in active">
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Central Property Type")</span>
                                        @Html.DropDownList("Alarm_PropertyType", (List<SelectListItem>)ViewBag.PropertyTypeEnum, new { @class = "form-control", id = "Alarm_PropertyType", style = "width:100%;height:34px;" })
                                        @*<input type="text" value="@Alarm.PropertyType" />*@
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Email Address")
                                            @if (Model.EmailVerified == true)
                                            {
                                                <span style="border: 2px solid #2ca01c; background-color: #2ca01c; height: 80px; border-radius: 30%; width: 80px; color: white;"> &#10004;</span>
                                            }
                                            else if (Model.EmailVerified == false && !string.IsNullOrEmpty(Model.EmailAddress))
                                            {
                                                <span style="border: 2px solid #d9534f; background-color: #d9534f; height: 80px; border-radius: 30%; width: 80px; color: white;"> &#10006;</span>
                                            }
                                        </span>
                                        <input type="text" id="Alarm_EmailAddress" value="@Alarm.EmailAddress" placeholder="Email Address" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Phone")</span>
                                        <input type="text" id="Alarm_Phone" value="@Alarm.Phone" placeholder="xxx-xxx-xxxx" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Dealer Customer")</span>
                                        <input type="text" id="Alarm_DealerCustomer" value="@Alarm.DealerCustomer" placeholder="Dealer Customer" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Login Name")</span>
                                        <input type="text" id="Alarm_LoginName" value="@Alarm.LoginName" placeholder="Login Name" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Installation Password")</span>
                                        <input type="text" id="Alarm_Password" value="@Alarm.Password" placeholder="Password" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Installation Street")</span>
                                        <input type="text" id="Alarm_InsStreet" value="@Alarm.InsStreet" placeholder="Street" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Installation City")</span>
                                        <input type="text" id="Alarm_InsCity" value="@Alarm.InsCity" placeholder="City" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Installation State")</span>
                                        @Html.DropDownList("Alarm_InsState", (List<SelectListItem>)ViewBag.StateList, new { @class = "form-control", id = "Alarm_InsState", style = "width:100%;height:34px;" })
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Installation Zip Code")</span>
                                        <input type="text" id="Alarm_InsZip" value="@Alarm.InsZip" placeholder="Zip Code" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Culture")</span>
                                        @*ViewBag.CultureEnum*@
                                        @Html.DropDownList("Alarm_Culture", (List<SelectListItem>)ViewBag.CultureEnum, new { @class = "form-control", id = "Alarm_Culture", style = "width:100%;height:34px;" })
                                        @*<input type="text" value="@Alarm.Culture" placeholder="Culture" />*@
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Pannel Type")</span>
                                        @Html.DropDownList("Alarm_PanelType", (List<SelectListItem>)ViewBag.PanelTypeEnum, new { @class = "form-control", id = "Alarm_PanelType", style = "width:100%;height:34px;" })
                                        @*<input type="text" value="@Alarm.PanelType" placeholder="Panel Type" />*@
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Pannel Version")</span>
                                        @Html.DropDownList("Alarm_PanelVersion", (List<SelectListItem>)ViewBag.PanelVersionEnum, new { @class = "form-control", id = "Alarm_PanelVersion", style = "width:100%;height:34px;" })
                                        @*<input type="text" value="@Alarm.PanelVersion" placeholder="Panel Version" />*@
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Model Serial Number")</span>
                                        <input type="text" id="Alarm_ModelSerialNumber" value="@Alarm.ModelSerialNumber" placeholder="Model Serial Number" />
                                    </div>
                                    <div class="form-group clearfix width-33p Alarm_PhoneLinePresent_check">
                                        <div>
                                            <input type="checkbox" id="Alarm_PhoneLinePresent" @((Alarm.PhoneLinePresent.HasValue && Alarm.PhoneLinePresent.Value) ? "checked" : "") />
                                            <span>@Localize.T("Phone Line Present")</span>
                                        </div>
                                        <div>
                                            <input type="checkbox" id="Alarm_IgnoreLowCoverageError" @((Alarm.IgnoreLowCoverageError.HasValue && Alarm.IgnoreLowCoverageError.Value) ? "checked" : "") />
                                            <span>@Localize.T("Ignore Low Coverage Error")</span>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Central Station Forwarding Option")</span>
                                        @Html.DropDownList("Alarm_CentrastationForwardingOption", (List<SelectListItem>)ViewBag.CentralStationForwardingOption, new { @class = "form-control", id = "Alarm_CentrastationForwardingOption", style = "width:100%;height:34px;" })
                                        @*<input type="text" value="@Alarm.CentrastationForwardingOption" placeholder="Centrastation Forwarding Option" />*@
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Central Station Account No")</span>
                                        <input type="text" id="Alarm_CentralStationAccountNo" value="@Alarm.CentralStationAccountNo" placeholder="Central Station AccountNo" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Central Station Receiver No")</span>
                                        <input type="text" id="Alarm_CentralStationRecieverNumber" value="@Alarm.CentralStationRecieverNumber" placeholder="Central Station RecieverNo" />
                                    </div>
                                    <div class="form-group clearfix width-33p">
                                        <span class="span-style">@Localize.T("Package Id")</span>
                                        <input type="text" id="Alarm_PackageId" value="@Alarm.PackageId" placeholder="Package Id" />
                                    </div>
                                    <div class="form-group clearfix width-33p">

                                    </div>
                                    <div class="form-group clearfix width-100p">
                                        <button class="btn btnAddToAlarm @(string.IsNullOrWhiteSpace(Model.AlarmRefId) ? "" : "hidden" )" id="SubscribeToAlarm">Add to alarm.com</button>
                                        @*<button>Remove from alarm.com</button>*@
                                    </div>
                                </div>
                                <div id="moniacc" class="tab-pane fade">
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Account Name")</span>
                                        @Html.TextBox(@*x => x.ApiMonitronics.AccountName*@ "MonAccountName", new { @class = "form-control", Placeholder = "Monitronics", id = "AccNameMoni", Readonly = "readonly" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Url")</span>
                                        @Html.TextBox(@*x => x.ApiMonitronics.Url*@ "MonUrl", new { @class = "form-control", Placeholder = "http://monitronics.com/.....", id = "UrlMoni" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Username")</span>
                                        @Html.TextBox(@*x => x.ApiMonitronics.UserName*@ "MonUserName", new { @class = "form-control", Placeholder = "User Name", id = "UsernameMoni" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Password")</span>
                                        @Html.TextBox(@*x => x.ApiMonitronics.Password*@ "MonPass", new { @class = "form-control", Placeholder = "Password", id = "PasswordMoni" })
                                    </div>
                                </div>
                                <div id="centralacc" class="tab-pane fade">
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Account Name")</span>
                                        @Html.TextBox(@*x => x.ApiCentralStation.AccountName*@ "CSMAccountName", new { @class = "form-control", Placeholder = "Central Station", id = "AccNameCentral", Readonly = "readonly" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Url")</span>
                                        @Html.TextBox(@*x => x.ApiCentralStation.Url*@ "CSMUrl", new { @class = "form-control", Placeholder = "http://central-station.com/.....", id = "UrlCentral" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Username")</span>
                                        @Html.TextBox(@*x => x.ApiCentralStation.UserName*@ "CSMUserName", new { @class = "form-control", Placeholder = "User Name", id = "UsernameCentral" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Password")</span>
                                        @Html.TextBox(@*x => x.ApiCentralStation.Password*@ "CSMPassword", new { @class = "form-control", Placeholder = "Password", id = "PasswordCentral" })
                                    </div>
                                </div>
                                <div id="TransUnion" class="tab-pane fade">
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Social Security Number")</span>
                                        @Html.TextBoxFor(x => x.SSN, new { @class = "form-control", placeholder = "xxx-xx-xxxx", id = "SSN" })
                                    </div>
                                    <div class="form-group clearfix width-50p">
                                        <span class="span-style">@Localize.T("Date of Birth")</span>
                                        @Html.TextBoxFor(x => x.DateofBirth, new { @class = "form-control dob-datepicker" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }                <div id="previousAddress" class="container-fluid">
                    <span class="width-100p sub-header">
                        @Localize.T("Billing / Funding Information")
                    </span>
                    <div class="customer_info_container">
                        @*@if (globalSetting.Where(x => x.SearchKey == "CreditScore").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p group-style custom_width_div">
                                <span class="span-style">@Localize.T("Credit Score")</span>
                                @Html.DropDownListFor(x => x.CreditScore, (List<SelectListItem>)ViewBag.CreditScore, new { @class = "form-control", id = "CreditScore", style = "width:100%" ,@disabled = "disabled" })
                            </div>
                        }
                        @if (globalSetting.Where(x => x.SearchKey == "ContractTerm").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Contract Term")</span>
                                @Html.DropDownListFor(x => x.ContractTeam, (List<SelectListItem>)ViewBag.ContractTerm, new { @class = "form-control", id = "ContractTerm", style = "width:100%", @disabled = "disabled" })
                            </div>
                        }
                        @if (globalSetting.Where(x => x.SearchKey == "CustomerFunded").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Customer Funded")</span>
                                @Html.DropDownListFor(x => x.CustomerFunded, (List<SelectListItem>)ViewBag.YesNoList, new { @class = "form-control", id = "CustomerFunded", style = "width:100%", @disabled = "disabled" })
                            </div>
                        }
                        @if (globalSetting.Where(x => x.SearchKey == "MonitoringFee").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Monitoring Fee")</span>
                                @Html.DropDownListFor(x => x.MonthlyMonitoringFee, (List<SelectListItem>)ViewBag.MonthlyMonitoringFee, new { @class = "form-control", id = "MonthlyMonitoringFee", style = "width:100%", @disabled = "disabled" })
                            </div>
                        }
                        @if (globalSetting.Where(x => x.SearchKey == "FundingCompany").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Funding Company")</span>
                                @Html.DropDownListFor(x => x.FundingCompany, (List<SelectListItem>)ViewBag.FundingCompany, new { @class = "form-control", id = "FundingCompany", style = "width:100%", @disabled = "disabled" })
                            </div>
                        }
                        <div class="form-group clearfix width-33p custom_width_div">
                            <span class="span-style">@Localize.T("Maintenance")</span>
                            @Html.DropDownListFor(x => x.Maintenance, (List<SelectListItem>)ViewBag.YesNoList, new { @class = "form-control", id = "Maintenance", style = "width:100%", @disabled = "disabled" })
                        </div>
                        @if (globalSetting.Where(x => x.SearchKey == "OutstandingBalance").FirstOrDefault().Value == "true")
                        {
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Outstanding Balance")</span>
                                @Html.TextBoxFor(x => x.BillOutStanding, new { @class = "form-control", id = "BillOutStanding", placeholder = "this amount will be added to the next billing cycle amount", @disabled = "disabled" })
                            </div>
                        }
                        <div class="form-group clearfix width-33p custom_width_div">
                            <span class="span-style">@Localize.T("Bill Amount")</span>
                            @Html.TextBoxFor(x => x.BillAmount, new { @class = "form-control", id = "BillAmount", @disabled = "disabled" })
                        </div>
                        <div class="form-group clearfix width-33p custom_width_div">
                            <span class="span-style">@Localize.T("Bill Cycle")</span>
                            @Html.DropDownListFor(x => x.BillCycle, (List<SelectListItem>)ViewBag.BillCycle, new { @class = "form-control", id = "BillCycle", style = "width:100%", @disabled = "disabled" })
                        </div>
                        <div class="clearfix width-33p custom_width_div">
                            <div class="custom_width_100p">
                                <div class="clearfix width-70p custom_width_div">
                                    <span class="span-style">@Localize.T("Start Date")</span>
                                    <input type="text" id="FirstBilling" class="form-control" value="@(Model.FirstBilling.HasValue?Model.FirstBilling.Value.ToString("MM/dd/yyyy"):"")" placeholder="mm/dd/yyyy" disabled/>
                                    <label class="label hidden red" id="firstbillingerr">@Localize.T("First billing day has to be same as bill day.")</label>
                                </div>
                                <div class="clearfix width-30p custom_width_div">
                                    <span class="span-style">@Localize.T("Bill Day")</span>
                                    @Html.DropDownListFor(x => x.BillDay, (List<SelectListItem>)ViewBag.BillingDay, new { @class = "form-control", id = "BillDay", @disabled = "disabled" })

                                </div>
                            </div>
                        </div>*@
                        <div class="custom_width_100p">
                            <div class="form-group clearfix width-33p custom_width_div add_customer_margin_device">
                                <span class="span-style">@Localize.T("Payment Method")</span>
                                @Html.DropDownListFor(x => x.PaymentMethod, (List<SelectListItem>)ViewBag.PaymentMethod, new { @class = "form-control", id = "PaymentMethod", style = "width:100%"})
                            </div>
                            <label>Current Billing amount: </label><span id="bAmount">@Model.BillAmount</span>
                            @*<div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Taxable")</span>
                                @Html.DropDownListFor(x => x.BillTax, (List<SelectListItem>)ViewBag.BillYesNo, new { @class = "form-control", id = "BillTax", style = "width:100%", @disabled = "disabled" })
                            </div>*@
                        </div>
                        <!--Credit Card part-->
                        <div class="Customer_Debit_Div width-100p hidden">
                            <input type="hidden" id="debit_payment_info_id" value="@(((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).Id)" />
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Name On Account")<span class="red">*</span></span>
                                <input type="text" id="Credit-Card_AccountName" value="@(((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).AccountName)" class="form-control payment_control" placeholder="eg.:Jhon Smith",@disabled = "disabled" />
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Card Number")<span class="red">*</span></span>
                                @if ((((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber) != null)
                                {
                                    <input type="text" id="credit_card_number" value="@string.Concat("".PadLeft(12, '*'), (((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber).Substring((((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber).Length - 4))" class="form-control payment_control" datarequired="true" placeholder="eg.:xxxx xxxx xxxx xxxx" />
                                }
                                else
                                {
                                    <input type="text" id="credit_card_number" value="@(((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardNumber)" class="form-control payment_control" placeholder="eg.:xxxx xxxx xxxx xxxx" disabled />
                                }
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <div class="form-group clearfix width-16p custom_width_div">
                                    <span class="span-style">@Localize.T("Expiration Date")<span class="red">*</span></span>
                                    <input type="text" id="credit_card_expireDate" value="@(((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardExpireDate)" class="form-control payment_control" placeholder="eg.:MMYY" />
                                </div>
                                <div class="form-group clearfix width-16p custom_width_div" style="padding-left: 5px;">
                                    <span class="span-style">@Localize.T("CVV Number")<span class="red">*</span></span>
                                    <input type="password" id="credit_card_CardSecurityCode" value="@(((HS.Entities.PaymentInfo)ViewBag.CreditCardInfo).CardSecurityCode)" class="form-control payment_control" placeholder="eg.:325" />
                                </div>
                            </div>
                            @*<div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Authorize.net Subscription ID")</span>
                                @Html.TextBoxFor(x => x.AuthorizeRefId, new { @class = "form-control AuthorizeRefIdView" })
                            </div>
                            <div class="form-group clearfix width-67p custom_width_div">
                                <span class="span-style">@Localize.T("Authorize.net Description")</span>
                                <input type="text" value="@Model.AuthorizeDescription" id="AuthDescription" class="AuthDescription form-control" />
                            </div>*@
                        </div>

                        <!--ACH PART-->
                        <div class="Customer_ACH_Div width-100p hidden">
                            <input type="hidden" id="ach_payment_info_id" value="@(((HS.Entities.PaymentInfo)ViewBag.ACHInfo).Id)" />
                            <div class="form-group clearfix width-33p custom_width_div relative">
                                <span class="span-style">@Localize.T("Name On Account")<span class="red">*</span></span>
                                <input @*maxlengthcheck="20"*@ type="text" id="ACH_AccountName" value="@(((HS.Entities.PaymentInfo)ViewBag.ACHInfo).AccountName)" class="form-control payment_control" placeholder="eg.:John Smith" />
                                @*<label class="hidden red label absolute maxlenghterr">@Localize.T("Name On Account can't exceed 20 characters.")</label>*@
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("ABA Routing Number")<span class="red">*</span></span>
                                <input type="text" id="ACH_RoutingNo" value="@(((HS.Entities.PaymentInfo)ViewBag.ACHInfo).RoutingNo)" class="form-control payment_control" placeholder="eg.:011103093" />
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("CS Account Number")<span class="red">*</span></span>
                                <input type="text" id="ACH_AcountNo" value="@(((HS.Entities.PaymentInfo)ViewBag.ACHInfo).AcountNo)" class="form-control payment_control" placeholder="eg.:12345678" />
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Bank Account Type")<span class="red">*</span></span>
                                @Html.DropDownList("BankAccountType", (List<SelectListItem>)ViewBag.BankAccountType, new { @class = "form-control payment_control", id = "ACH_BankAccountType", style = "width:100%" })
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("eCheck Type")<span class="red">*</span></span>
                                @Html.DropDownList("ECheckType", (List<SelectListItem>)ViewBag.ECheckType, new { @class = "form-control payment_control", id = "ACH_ECheckType", style = "width:100%" })
                            </div>
                            <div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Bank Name")</span>
                                <input type="text" class="form-control payment_control" id="ACH_BankName" placeholder="eg.:XYZ-Bank" />
                            </div>
                            @*<div class="form-group clearfix width-33p custom_width_div">
                                <span class="span-style">@Localize.T("Authorize.net Subscription ID")</span>
                                @Html.TextBoxFor(x => x.AuthorizeRefId, new { @class = "form-control AuthorizeRefIdView", id = "AuthorizeRefIdView" })
                            </div>
                            <div class="form-group clearfix width-67p custom_width_div">
                                <span class="span-style">@Localize.T("Authorize.net Description")</span>
                                <input type="text" class="AuthDescription form-control" />
                            </div>*@
                        </div>
                        <div class="Customer_Common_Div width-100p">
                            <div class="form-group clearfix width-100p custom_width_div">
                                <span class="span-style">@Localize.T("Notes")</span>
                                @Html.TextAreaFor(x => x.BillNotes, new { @style = "width:100%;", rows = "5"})
                            </div>
                        </div>
                        @*<div class="width-100p">
                            <button class="btn authsyncbtn @((!string.IsNullOrWhiteSpace(Model.AuthorizeRefId)&&(Model.IsRequiredCsvSync.HasValue && Model.IsRequiredCsvSync.Value))?"":"hidden")" id="syncwithauthorize">@Localize.T("Sync with Authorize.Net")</button>
                            <button class="btn btn-danger unsubscribebtn hidden" id="unsubscribe_to_authorize">@Localize.T("Unsubscribe from Authorize.Net")</button>
                            <button class="btn btn-danger subscribebtn hidden" id="subscribe_to_authorize">@Localize.T("Subscribe to Authorize.Net")</button>
                        </div>*@
                    </div>

                </div>
                <div id="Other" class="container-fluid">
                    <span class="width-100p sub-header">
                        @Localize.T("Emergency Contacts")
                    </span>

                    <div class="customer_info_container">

                        <div class="row">
                            <div class="col-md-12 clearfix right_side_pad">
                                <button type="button" class="btn" id="btnCustomerAddNewEmgContact">
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                                </button>
                            </div>

                            <div class="col-lg-12" id="AddNewEmgContactPartial">

                            </div>
                            <div id="EmergencyContactList">

                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="hidden" style=" display: none; visibility: hidden; ">
    <a href="@(AppConfig.DomainSitePath)/Customer/SubscribeToAuthorize/?CustomerId=@Model.Id" id="ARBSubscriptionForm">ARB Subscription form</a>
</div>
<section class="cus-section">
    <footer class="footer ac_top_border">
        <div class="SaveCancelDiv">
            @*<hr class="style1">*@
            <button class="btn btn-success SaveCustomer LastTabClickCustomerDetail" id="SaveCustomerDraft">@Localize.T("Save")</button>

            @if (Model.IsActive != null)
            {
                if (Model.IsActive == true)
                {
                    <button class="btn btn-InorActive InActive" id="InorActivebtn" idval="@Model.Id"><i class="fa fa-ban" aria-hidden="true"></i> @Localize.T("Cancel Customer")</button>
                }
                else
                {
                    <button class="btn btn-InorActive Active" id="InorActivebtn" idval="@Model.Id"><i class="fa fa-check" aria-hidden="true"></i>@Localize.T(" Activate")</button>
                }
            }
            <button onclick="CloseTopToBottomModal()" class="btn btn-danger" id="Cancel"><i class="fa fa-times" aria-hidden="true"></i> @Localize.T("Close")</button>
            @if (PermissionChekcer.IsPermitted(Permissions.CustomerPermissions.CustomerDelete))
            {
                <button class="btn btn-default DeleteThisCustomer" id="DeleteThisCustomer"><i class="fa fa-trash-o" aria-hidden="true"></i> @Localize.T("Delete")</button>
            }
        </div>
    </footer>
</section>
<div class="displayNone">
    <a href="" class="ClockTokenPopUp"></a>
</div>
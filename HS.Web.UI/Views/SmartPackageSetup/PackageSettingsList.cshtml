@{
    Layout = null;
    List<HS.Entities.SmartPackageEquipmentService> packageInclude = (List<HS.Entities.SmartPackageEquipmentService>)ViewBag.packIncludeEquipment;
    List<HS.Entities.SmartPackageEquipmentService> packageDevice = (List<HS.Entities.SmartPackageEquipmentService>)ViewBag.packDevice;
    List<HS.Entities.SmartPackageEquipmentService> packageOptional = (List<HS.Entities.SmartPackageEquipmentService>)ViewBag.packOptional;
    List<HS.Entities.SmartPackageEquipmentService> packServices = (List<HS.Entities.SmartPackageEquipmentService>)ViewBag.packServices;
    List<HS.Entities.PackageCommission> salesCommision = (List<HS.Entities.PackageCommission>)ViewBag.SalesCommision;
}
@using Localize = HS.Web.UI.Helper.LanguageHelper
@using AppConfig = HS.Framework.Utils.AppConfig;
 
@Styles.Render("~/styles/AddCustomer") 
@*<script src="~/Content/Js/PackageSetup/LoadPackageSettingsPartial.js"></script>*@
<script>
    var Loadpackagesettingslist = function () {
        //$(".ac_device_margin").load("/Leads/packagesettingslist/" + $("#packageid").val());
        //$(".TopToBottomModal .ContentsDiv").load("/Leads/packagesettingslist/" + $("#packageid").val());
        var packageId = $("#packageid").val();
        var InvoiceLoaderText = "<div class='invoice-loader'><div><div class='lds-css ng-scope'><div style='margin:auto; z-index:99;' class='lds-double-ring'><div></div><div></div></div></div></div></div>";
        $(".TopToBottomModal .ContentsDiv").html(InvoiceLoaderText);
        setTimeout(function () {
            $(".TopToBottomModal .ContentsDiv").load(domainurl + "/SmartPackageSetup/packagesettingslist/" + packageId);
        }, 700);

        var DeletePackageOptional = function (PacakgeDeleteId) {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
                $.ajax({
                    url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                    data: { id: PacakgeDeleteId },
                    type: "Post",
                    dataType: "Json"
                }).done(function () {
                    Loadpackagesettingslist();
                });
            });
        }
        var DeleteSalesCommission = function (PacakgeDeleteId) {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
                $.ajax({
                    url: domainurl + "/SmartPackageSetup/DeleteSalesCommission",
                    data: { id: PacakgeDeleteId },
                    type: "Post",
                    dataType: "Json"
                }).done(function () {
                    Loadpackagesettingslist();
                });
            });
        }
        var DeletePackageInclude = function (PacakgeDeleteId) {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
                $.ajax({
                    url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                    data: { id: PacakgeDeleteId },
                    type: "Post",
                    dataType: "Json"
                }).done(function () {
                    Loadpackagesettingslist();
                });
            });
        }
        var DeletePackageDevice = function (PacakgeDeleteId) {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
                $.ajax({
                    url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                    data: { id: PacakgeDeleteId },
                    type: "Post",
                    dataType: "Json"
                }).done(function () {
                    Loadpackagesettingslist();
                });
            });
        }

        var DeletePackageService = function (PacakgeDeleteId) {
            OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
                $.ajax({
                    url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                    data: { id: PacakgeDeleteId },
                    type: "Post",
                    dataType: "Json"
                }).done(function () {
                    Loadpackagesettingslist();
                    $(".company-package-device-list-div").load("@(AppConfig.DomainSitePath)/SmartPackageSetup/CompanyPackageDeviceListPartial");
                });
            });
        }
    }

    var DeletePackageOptional = function (PacakgeDeleteId) {
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
            $.ajax({
                url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                data: { id: PacakgeDeleteId },
                type: "Post",
                dataType: "Json"
            }).done(function () {
                Loadpackagesettingslist();
                $(".company-package-optional-list-div").load("@(AppConfig.DomainSitePath)/SmartPackageSetup/CompanyPackageOptionalListPartial");
            });
        });
    }

    var DeletePackageInclude = function (PacakgeDeleteId) {
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
            $.ajax({
                url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                data: { id: PacakgeDeleteId },
                type: "Post",
                dataType: "Json"
            }).done(function () {
                Loadpackagesettingslist();
                $(".company-package-include-products-list-div").load("@(AppConfig.DomainSitePath)/SmartPackageSetup/CompanyPackageIncludeListPartial");
            });
        });
    }
    var DeletePackageDevice = function (PacakgeDeleteId) {
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
            $.ajax({
                url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                data: { id: PacakgeDeleteId },
                type: "Post",
                dataType: "Json"
            }).done(function () {
                Loadpackagesettingslist();
                $(".company-package-device-list-div").load("@(AppConfig.DomainSitePath)/SmartPackageSetup/CompanyPackageDeviceListPartial");
            });
        });
    }

    var DeletePackageService = function (PacakgeDeleteId) {
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
            $.ajax({
                url: domainurl + "/SmartPackageSetup/DeleteSmartPackageEquipmentService",
                data: { id: PacakgeDeleteId },
                type: "Post",
                dataType: "Json"
            }).done(function () {
                Loadpackagesettingslist();
                $(".company-package-device-list-div").load("@(AppConfig.DomainSitePath)/SmartPackageSetup/CompanyPackageDeviceListPartial");
            });
        });
    }
    var DeleteSalesCommission = function (PacakgeDeleteId) {
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", function () {
            $.ajax({
                url: domainurl + "/SmartPackageSetup/DeleteSalesCommission",
                data: { id: PacakgeDeleteId },
                type: "Post",
                dataType: "Json"
            }).done(function () {
                Loadpackagesettingslist();
            });
        });
    }
    $("#delete-pack-Optional").click(function () {
        var PackageId = $(this).attr("idval");
        PacakgeDeleteId = PackageId;
        parent.OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", DeletePackageOptional);
    })
    $("#delete-pack-include").click(function () {
        var PackageId = $(this).attr("idval");
        PacakgeDeleteId = PackageId;
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", DeletePackageInclude);
    })
    $("#delete-pack-Device").click(function () {
        var PackageId = $(this).attr("idval");
        PacakgeDeleteId = PackageId;
        OpenConfirmationMessageNew("Confirm?", "Are you sure you want to delete this item?", DeletePackageDevice);
    })

    var EditPackageInclude = function (includeId) {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageIncludePartial/?Id=" + includeId + "&packageid=" + $("#packageid").val());
    }

    var EditPackageDevice = function (deviceId) {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageDevicePartial/?Id=" + deviceId + "&packageid=" + $("#packageid").val());
    }

    var EditPackageService = function (optionalId) {
        OpenRightToLeftLgModal(domainurl + "/SmartPackageSetup/AddCompanyPackageServicesPartial/?Id=" + optionalId + "&packageid=" + $("#packageid").val());
    }

    var EditPackageOptional = function (optionalId) {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageOptionalPartial/?Id=" + optionalId + "&packageid=" + $("#packageid").val());
    }
    var EditSalesCommission = function (optionalId) {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanySalesCommissionPartial/?Id=" + optionalId + "&packageid=" + $("#packageid").val());
    }

    $("#add-Package-include").click(function () {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageIncludePartial/?Id=0" + "&packageid=" + $("#packageid").val());
    });
    $("#add-sales-commission").click(function () {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanySalesCommissionPartial/?Id=0" + "&packageid=" + $("#packageid").val());
    })
    $("#edit-pack-include").click(function () {
        var includeId = $(this).attr("idval");
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageIncludePartial/?Id=" + includeId + "&packageid=" + $("#packageid").val());
    });
    $("#add-pack-device").click(function () {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageDevicePartial/?Id=0" + "&packageid=" + $("#packageid").val());
    });
    $("#edit-pack-device").click(function () {
        var deviceId = $(this).attr("idval");
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageDevicePartial/?Id=" + deviceId + "&packageid=" + $("#packageid").val());
    })
    $("#add-pack-optional").click(function () {
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageOptionalPartial/?Id=0" + "&packageid=" + $("#packageid").val());
    });
    $("#edit-pack-optional").click(function () {
        var optionalId = $(this).attr("idval");
        OpenRightToLeftModal(domainurl + "/SmartPackageSetup/AddCompanyPackageOptionalPartial/?Id=" + optionalId + "&packageid=" + $("#packageid").val());
    });
    $("#add-pack-service").click(function () {
        OpenRightToLeftLgModal(domainurl + "/SmartPackageSetup/AddCompanyPackageServicesPartial/?Id=0" + "&packageid=" + $("#packageid").val());
    });
    $("#edit-pack-service").click(function () {
        var optionalId = $(this).attr("idval");
        OpenRightToLeftLgModal(domainurl + "/SmartPackageSetup/AddCompanyPackageServicesPartial/?Id=" + optionalId + "&packageid=" + $("#packageid").val());
    });
    $(document).ready(function () {
        parent.$('.close').click(function () {
            parent.$(".modal-body").html('');
        })
        $(".LoaderWorkingDiv").hide();

        $("#savePackageInclude").click(function () {
            if (CommonUiValidation()) {
                addPackageInclude();
            }
        })
        //$(".company-packagelist-div").load("/Leads/CompanyPackageListPartial");
    });
</script>
<style>
    .packageListTableContainer {
        padding-top: 10px;
        padding-bottom: 10px;
    }

    .add-customer-title {
        padding-top: 10px;
        padding-left: 15px;
    }

    .sub-header {
        text-transform: capitalize;
    }

    .delete-package-service {
        color: #2ca01c;
        text-decoration: none;
    }
     .delete-package-service:hover {
        color: #2ca01c;
        text-decoration: none;
        cursor:pointer;
    }
     .include_equip_table thead tr th:nth-child(3),
     .device_table thead tr th:nth-child(3),
     .service_table thead tr th:nth-child(3),
     .sales_comission_table thead tr th:nth-child(4),
     .optional_equip_table thead tr th:nth-child(2) {
         width:100px;
     }
      .include_equip_table tbody tr td:nth-child(3),
      .device_table tbody tr td:nth-child(3),
      .service_table tbody tr td:nth-child(3),
      .sales_comission_table tbody tr td:nth-child(4),
      .optional_equip_table tbody tr td:nth-child(2) {
         text-align:center;
     }
</style>
<input type="hidden" name="name" value="@ViewBag.PackageId" id="packageid" />
<div id="wrapper-section" class="ac_device_margin" style="overflow-y:scroll;height:100vh;">
    <span class="add-customer-title">Package: @ViewBag.LeadType<span>-></span>@ViewBag.PackageName</span>
    @*<button class="btn add-package" id="add-Package" type="button">
            <i class="fa fa-plus-circle" aria-hidden="true"></i>  New
        </button>*@
    <div id="contactInformation" class="container-fluid">
        <span class="width-100p sub-header">
            @Localize.T("Included Equipment")
            <span>
                <button class="btn add-package" id="add-Package-include" type="button">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                </button>
            </span>
        </span>
        <div class="packageListTableContainer">
            @*@if (packageInclude.Count > 0 && packageInclude.Where(x => x.PackageEqpId != 0).Count() > 0)
                {*@
            <table id="packageListTable" class="include_equip_table">
                <thead>
                    <tr>
                        <th>&nbsp; &nbsp;@Localize.T("Equipment Name")</th>
                        @*<th>&nbsp; &nbsp;@Localize.T("Package Name")</th>*@
                        <th>&nbsp; &nbsp;@Localize.T("Number of Equipment")</th>
                        <th>&nbsp; &nbsp;@Localize.T("Action")</th>
                    </tr>
                </thead>
                @*@if (packageInclude.Where(x => x.PackageEqpId != 0).Count() > 0)
                    {*@
                <tbody>
                    @foreach (var item in packageInclude)
                    {
                        var manuName = string.IsNullOrEmpty(item.ManufacturerName) ? "" : "(" + item.ManufacturerName + ")";
                        <tr>
                            <td class="cplp_info_allign"><a class="edit-package" id="" onclick="EditPackageInclude(@item.Id)" idval="@item.Id">@item.EquipmentName @manuName (@item.SKU)</a></td>
                            @*<td class="cplp_info_allign">@item.PackageName</td>*@
                            <td class="cplp_info_allign">@item.EptNo</td>
                            <td class="cplp_info_allign"><a class="delete-package-include" idval="@item.Id" id="" onclick="DeletePackageInclude(@item.Id)" title="@Localize.T("Delete")"><i class="fa fa-trash-o"></i></a></td>
                        </tr>
                    }
                </tbody>
                @*}*@
            </table>
            @*}
                else
                {
                    <span>No Data Found</span>
                }*@
        </div>
    </div>

    <div id="contactInformation" class="container-fluid">
        <span class="width-100p sub-header">
            @Localize.T("Devices")
            <span>
                <button class="btn add-package" id="add-pack-device" type="button">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                </button>
            </span>
        </span>
        <div class="packageListTableContainer">
            @*@if (packageDevice.Count > 0)
                {*@
            <table id="packageListTable" class="device_table">
                <thead>
                    <tr>
                        <th>&nbsp; &nbsp;@Localize.T("Equipment Name")</th>
                        @*<th>&nbsp; &nbsp;@Localize.T("Package Name")</th>*@
                        <th>&nbsp; &nbsp;@Localize.T("Number of Equipment")</th>
                        <th>&nbsp; &nbsp;@Localize.T("Action")</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in packageDevice)
                    {
                        var manuName = string.IsNullOrEmpty(item.ManufacturerName) ? "" : "(" + item.ManufacturerName + ")";
                        <tr>
                            <td class="cplp_info_allign"><a class="edit-package" id="" onclick="EditPackageDevice(@item.Id)" idval="@item.Id">@item.EquipmentName @manuName</a></td>
                            @*<td class="cplp_info_allign">@item.PackageName</td>*@
                            <td class="cplp_info_allign">@item.EptNo</td>
                            <td class="cplp_info_allign"><a class="delete-package-Device" idval="@item.Id" id="" onclick="DeletePackageDevice(@item.Id)" title="@Localize.T("Delete")"><i class="fa fa-trash-o"></i></a></td>
                        </tr>
                    }
                </tbody>
            </table>
            @*}
                else
                {
                    <span>No Data Found</span>
                }*@
        </div>
    </div>


    <div id="contactInformation" class="container-fluid">
        <span class="width-100p sub-header">
            @Localize.T("Optional Equipment")
            <span>
                <button class="btn add-package" id="add-pack-optional" type="button">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                </button>
            </span>
        </span>
        <div class="packageListTableContainer">
            @*@if (packageOptional.Count > 0)
                {*@
            <table id="packageListTable" class="optional_equip_table">
                <thead>
                    <tr>
                        <th>&nbsp; &nbsp;@Localize.T("Equipment Name")</th>
                        @*<th>&nbsp; &nbsp;@Localize.T("Package Name")</th>*@
                        <th>&nbsp; &nbsp;@Localize.T("Action")</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in packageOptional)
                    {
                        var manuName = string.IsNullOrEmpty(item.ManufacturerName) ? "" : "(" + item.ManufacturerName + ")";
                        <tr>
                            <td class="cplp_info_allign"><a class="edit-package" id="" onclick="EditPackageOptional(@item.Id)" idval="@item.Id">@item.EquipmentName @manuName</a></td>
                            @*<td class="cplp_info_allign">@item.PackageName</td>*@
                            <td class="cplp_info_allign"><a class="delete-package-Optional" idval="@item.Id" id="" onclick="DeletePackageOptional(@item.Id)" title="@Localize.T("Delete")"><i class="fa fa-trash-o"></i></a></td>
                        </tr>
                    }
                </tbody>
            </table>
            @*}
                else
                {
                    <span>No Data Found</span>
                }*@
        </div>
    </div>

    <div id="contactInformation" class="container-fluid">
        <span class="width-100p sub-header">
            @Localize.T("Services")
            <span>
                <button class="btn add-package" id="add-pack-service" type="button">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                </button>
            </span>
        </span>
        <div class="packageListTableContainer">
            @*@if (packageDevice.Count > 0)
                {*@
            <table id="packageListTable" class="service_table">
                <thead>
                    <tr>
                        <th>&nbsp; &nbsp;@Localize.T("Service Name")</th>
                        @*<th>&nbsp; &nbsp;@Localize.T("Package Name")</th>*@
                        <th>&nbsp; &nbsp;@Localize.T("Price")</th>
                        <th>&nbsp; &nbsp;@Localize.T("Action")</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in packServices)
                    {
                        var manuName = string.IsNullOrEmpty(item.ManufacturerName) ? "" : "(" + item.ManufacturerName + ")";
                        <tr>
                            <td class="cplp_info_allign"><a class="edit-package" id="" onclick="EditPackageService(@item.Id)" idval="@item.Id">@item.EquipmentName @manuName</a></td>
                            @*<td class="cplp_info_allign">@item.PackageName</td>*@
                            <td class="cplp_info_allign">@HS.Web.UI.Helper.LabelHelper.CurrentTransMakeCurrency.MakeCurrency(null)@HS.Web.UI.Helper.LabelHelper.FormatAmount(item.Price.Value)</td>
                            <td class="cplp_info_allign"><a class="delete-package-service" idval="@item.Id" id="" onclick="DeletePackageService(@item.Id)" title="@Localize.T("Delete")"><i class="fa fa-trash-o"></i></a></td>
                        </tr>
                    }
                </tbody>
            </table>
            @*}
                else
                {
                    <span>No Data Found</span>
                }*@
        </div>
    </div>

    <div id="contactInformation" class="container-fluid">
        <span class="width-100p sub-header">
            @Localize.T("Sales Commission")
            @*<span>
                <button class="btn add-package" id="add-sales-commission" type="button">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> @Localize.T(" New")
                </button>
            </span>*@
        </span>
        <div class="packageListTableContainer">
            @*@if (packageDevice.Count > 0)
                {*@
            <table id="packageListTable" class="sales_comission_table">
                <thead>
                    <tr>
                       
                        <th>&nbsp; &nbsp;@Localize.T("Commission Type")</th>
                        <th>&nbsp; &nbsp;@Localize.T("Commission")</th>
                  
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in salesCommision)
                    {
                        <tr>
                           
                            <td class="cplp_info_allign">@item.CommissionType</td>
                            <td class="cplp_info_allign">@item.Commission.ToString("0.##")</td>
                          
                        </tr>
                    }
                </tbody>
            </table>
            @*}
                else
                {
                    <span>No Data Found</span>
                }*@
        </div>
    </div>
</div>

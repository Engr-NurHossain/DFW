@{
    Layout = null;
    string Currency = HS.Web.UI.Helper.LabelHelper.CurrentTransMakeCurrency.MakeCurrency(null);
}
@using Localize = HS.Web.UI.Helper.LanguageHelper
<link href="~/Content/Css/Ticket/TicketListPartial.css" rel="stylesheet" />


<script> 
    var LoadEstimateList = function () {
        var mindate = $("#min_date_estimate").val();
        var maxdate = $("#max_date_estimate").val();
        var searchtxt = encodeURI($("#search_txt_estimate").val());
        $(".LoadEstimateList").load(domainurl + "/Reports/EstimateReportList?mindate=" + mindate + "&maxdate=" + maxdate + "&searchtxt=" + searchtxt);
        //if (typeof (mindate) != "undefined" && mindate != null && mindate != "" && typeof (maxdate) != "undefined" && maxdate != null && maxdate != "") {
        //    $(".LoadEstimateList").html(TabsLoaderText);
        //$(".LoadEstimateList").load(domainurl + "/Reports/EstimateReportList?mindate=" + mindate + "&maxdate=" + maxdate + "&searchtxt=" + searchtxt);
        //}
        //else {
        //    OpenErrorMessageNew("Error", "Date from and to should not be empty");
        //}
    }
    $(document).ready(function () {
        var datefrom = new Pikaday({ format: 'MM/DD/YYYY', field: $('#min_date_estimate')[0] });
        var dateto = new Pikaday({format: 'MM/DD/YYYY', field: $('#max_date_estimate')[0]});
        setTimeout(function () {
            LoadEstimateList();
        }, 1000);
         
        $("#btn_download_estimates").click(function () {
            var mindate = $("#min_date_estimate").val();
            var maxdate = $("#max_date_estimate").val();
            var searchtxt = encodeURI($("#search_txt_estimate").val());
            window.location.href = domainurl + "/Reports/EstimateReportList?mindate=" + mindate + "&maxdate=" + maxdate + "&searchtxt=" + searchtxt + "&getreport=true";
            //if (typeof (mindate) != "undefined" && mindate != null && mindate != "" && typeof (maxdate) != "undefined" && maxdate != null && maxdate != "") {
            //    window.location.href = domainurl + "/Reports/UpsellsReportList?mindate=" + mindate + "&maxdate=" + maxdate + "&searchtxt=" + searchtxt + "&getreport=true";
            //}
            //else {
            //    OpenErrorMessageNew("Error", "Date from and to should not be empty");
            //}
        })
    })
</script>

<div class="payroll_list_container payroll_container_main">
    <div class="left_content_div">
        <input class="form-control" placeholder="Search" id="search_txt_estimate" />
        <input class="form-control hidden" placeholder="Min Date" id="min_date_estimate" />
        <input class="form-control hidden" placeholder="Max Date" id="max_date_estimate" />
        <div class="input-group add-on"> 
            <div class="input-group-btn"> <button class="btn green_button" id="btn_search" onclick="LoadEstimateList()" title="Search"><i class="fa fa-search"></i></button></div>
        </div>
    </div>
    <div class="right_content_div">
        <button class="btn green_button" id="btn_download_estimates" title="Download"><i class="fa fa-download"></i></button>
    </div>
    <div class="LoadEstimateList">

    </div>
</div>

@model HS.Entities.EmployeeReview
@{
    Layout = "~/Views/Shared/_PublicLayout.cshtml";

    string inputClass = "";
    if (Model.Permission == "readonly")
    {
        inputClass = "disabled";
    }
}
<script src="/Content/PikDay/js/moment.js"></script>
<script src="~/Content/PikDay/js/pikaday.js"></script>
<link href="~/Content/PikDay/css/pikaday.css" rel="stylesheet" />
<link href="~/Content/Css/Layout/Loader.css" rel="stylesheet" />
<style>
    .AddInvoiceLoader {
        width: 100%;
        background: white;
        opacity: 0.8;
        position: fixed;
        z-index: 99999;
        top: 0;
        bottom: 0;
    }

    .invoice-loader {
        min-height: 300px;
    }

    .employee_per_review_container {
        width: 100%;
        float: left;
        padding: 5px 15px;
        font-family: Arial;
        position: relative;
        box-sizing: border-box;
        margin-bottom: 60px;
        margin-top: 50px;
        height: 833px;
        overflow-y: scroll;
    }

        .employee_per_review_container div {
            box-sizing: border-box;
        }

    .erp_top_logo {
        width: 200px;
        height: 100px;
        background-color: #ccc;
        position: relative;
    }

        .erp_top_logo img {
            max-width: 100%;
            max-height: 100%;
            position: absolute;
            top: 0px;
            bottom: 0px;
            left: 0px;
            margin: auto;
        }

    .employee_per_review_container table {
        width: 100%;
    }

        .employee_per_review_container table tbody tr {
            height: 40px;
        }

    table {
        border-collapse: collapse;
        margin-bottom: 20px;
    }

        table tbody tr {
            border-bottom: 1px solid #ccc;
        }

            table tbody tr td {
                border-left: 1px solid #ccc;
            }

                table tbody tr td:nth-child(1) {
                    border: none;
                }

    .employee_info_table tbody tr td:nth-child(1),
    .employee_info_table tbody tr td:nth-child(3) {
        padding: 5px 10px;
        width: 10%;
        font-size: 13px;
        font-weight: 600;
    }

    .verification_review_table tbody tr td:nth-child(1),
    .verification_review_table tbody tr td:nth-child(3) {
        padding: 5px 10px;
        width: 10%;
        font-size: 13px;
        font-weight: 600;
    }

    .verification_review_table tbody tr {
        border-top: 1px solid #ccc;
        height: 40px;
    }

    .epr_header {
        width: 100%;
        float: left;
        font-size: 22px;
        font-weight: 600;
    }

    .epr_header_big {
        width: 100%;
        float: left;
        font-size: 24px;
        font-weight: 600;
        padding: 10px 0px;
    }

    .epr_sub_header {
        width: 100%;
        float: left;
        font-size: 20px;
        font-weight: 600;
        color: #fff;
        background-color: #808080;
        text-align: left;
        padding: 5px 10px;
        position: relative;
        margin: 5px 0px 0px 0px;
    }

    .employee_per_review_container input {
        height: 30px;
        padding: 0px 10px;
        width: 100%;
        border: none;
    }

        .employee_per_review_container input:focus,
        textarea:focus {
            outline: none;
            border: none;
            box-shadow: none;
        }

        .employee_per_review_container input[type="radio"]:not(old) {
            width: 15px;
            height: 15px;
            cursor: pointer;
            -webkit-appearance: checkbox; /* Chrome, Safari, Opera */
        }

    .ratings_table tbody tr:nth-child(odd) {
        height: 35px;
    }

    .ratings_table tbody tr:nth-child(even) {
        height: 20px;
    }

    .ratings_table tbody tr td {
        padding: 5px 10px;
        font-size: 13px;
        font-weight: 600;
    }

    .ratings_table tbody tr td {
        width: 12%;
        text-align: center;
    }

        .ratings_table tbody tr td:nth-child(1) {
            width: 40%;
            text-align: left;
        }

    .ratings_table tbody .rating_comments td:nth-child(1) {
        width: 10%;
        text-align: left;
        font-weight: normal;
        font-style: italic;
    }

    .epr_normal_text {
        width: 100%;
        float: left;
        text-transform: capitalize;
        padding: 10px 0px;
    }

    textarea {
        width: 100%;
        border: none;
        height: 65px;
        padding: 5px;
    }

    .epr_goals {
        width: 100%;
        float: left;
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        margin-bottom: 10px;
    }

        .epr_goals textarea {
            height: 100px;
        }

    .epr_goals_left {
        width: 15%;
        float: left;
        padding: 5px 0px;
    }

        .epr_goals_left div {
            padding-bottom: 5px;
        }

    .epr_goals_right {
        width: 85%;
        float: left;
    }

    .erp_header_normal {
        width: 100%;
        float: left;
        font-weight: bold;
        padding: 10px 0px;
    }

    .erp_normal_text {
        width: 100%;
        float: left;
    }

    .erp_margin_top {
        margin-top: 20px;
    }

    .erp_top_margin {
        margin-top: 200px;
    }

    .erp_overall_rating_list {
        width: 100%;
        float: left;
    }

        .erp_overall_rating_list ul li {
            padding: 5px 0px;
        }

    .radio_check {
        display: block;
        position: relative;
        padding-left: 35px;
        margin-bottom: 12px;
        cursor: pointer;
        font-size: 22px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

        .radio_check input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

    .checkmark {
        position: absolute;
        top: -2px;
        left: 45%;
        height: 15px;
        width: 15px;
        border-radius: 2px;
        background-color: #eee;
        border: 1px solid #ddd;
    }

    .radio_check:hover input ~ .checkmark {
        background-color: #ccc;
    }

    .radio_check input:checked ~ .checkmark {
        background-color: #ccc;
    }

    .checkmark:after {
        content: "";
        position: absolute;
        display: none;
    }

    .radio_check input:checked ~ .checkmark:after {
        display: block;
    }

    .radio_check .checkmark:after {
        top: 1px;
        left: 5px;
        width: 4px;
        height: 8px;
        border: solid #000;
        border-width: 0 2px 2px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
    }

    .employee_survey_btn_container {
        float: left;
        background-color: #fff;
        border-top: 2px solid #ccc;
        padding: 10px;
        width: 90%;
        position: fixed;
        bottom: 0px;
        right: 15px;
        text-align: right;
    }

    #btnSaveSurvey {
        background-color: #2ca01c;
        color: #fff;
    }
</style>
<script>
    var ReviewId = '@ViewBag.ReviewId';
    var ReviewedBy = '@ViewBag.ReviewedBy'
    var ReviewDatePicker;
    var NextReviewPicker;
    var KnowladgeVal = @Model.JobKnowledge;
    var WorkQualityVal = @Model.WorkQuality;
    var AttendanceVal = @Model.Attendance;
    var InitiativeVal = @Model.Initiative;
    var CommunicationVal = @Model.CommunicationSkills;
    var DependabilityVal = @Model.Dependability;
    var UserType = '@ViewBag.CurrentUserType';
    //(ViewBag.CurrentUserType == "employee"


    var RadioCounters = function () {
        var TotalCounter = KnowladgeVal + WorkQualityVal + AttendanceVal + InitiativeVal + CommunicationVal + DependabilityVal;
        $("#OverAllRating").text(TotalCounter);
    }

    var EmployeeSurvey = {
        signaturePad: null,
        SaveSignature: function () {
            var data = [];
            if (EmployeeSurvey.signaturePad != null &&
                typeof (EmployeeSurvey.signaturePad) != "undefined" && typeof (EmployeeSurvey.signaturePad.toDataURL) != "undefined") {
                data = EmployeeSurvey.signaturePad.toDataURL('image/png');
            }
            var url = domainurl + "/SmartLeads/LoadCustomerSignatureImage";
            $.ajax({
                url: url,
                data: { data, LeadConvertId, templateid, firstpage, ticketid, recreate, isinvoice, invoiceid, CreateDocument, isestimator, estid, userid, commercial, ContractSubmit },
                type: "Post",
                dataType: "Json",
                success: function (data) { 
                    if (ContractSubmit == "True") {
                        $(".LoadImgDiv").addClass('hidden');
                        $(".LoadImgDiv_mobile").addClass('hidden');


                        OpenSuccessMessageNew("Success!", "Your agreement has been signed and sent to our office. You will also receive an email confirmation with your signed agreement!", function () {
                            $(".sign-document").addClass('hidden');
                            $(".bodyConentsDiv1").removeClass('hidden');
                            $(".bodyConentsDiv1_mobile_doc").removeClass('hidden');
                            $(".footerContents-agreement").addClass('hidden');
                            $(".sign-div").addClass('hidden');
                            var ifr = $('iframe')[0];
                            ifr.src = ifr.src
                            $(".LoadImgDiv").removeClass('hidden');
                        });
                        $(".loadcontractsubmitandsend").load("/SmartLeads/SmartIAgreeSetupAndSubmit?Id=" + LeadConvertId + "&recreate=" + recreate + "&agreementtempid=" + templateid + "&firstpage=" + firstpage + "&ticketid=" + ticketid + "&isinvoice=" + isinvoice + "&invoiceid=" + invoiceid + "&isestimator=" + isestimator + "&estid=" + estid + "&userid=" + userid + "&commercial=" + commercial);
                        setTimeout(function () {
                            $(".LoadImgDiv").addClass('hidden');
                            var ifr = $('iframe')[0];
                            ifr.src = ifr.src
                        }, 10000);
                    }
                    else if (data.uploadImage == true) {
                        issignuploaded = true;
                        EventDocumentClick();
                        OpenSuccessMessageNew("Success!", "Signature added successfully. Scroll at the bottom to fully review and submit document.", function () {
                            $(".btnSign").html("<i class='fa fa-sign-in' aria-hidden='true'></i> Re-sign Document");
                            if (!Device.All()) {
                                $(".sign-document").addClass('hidden');
                                $(".bodyConentsDiv1").removeClass('hidden');
                                $(".bodyConentsDiv1_mobile_doc").removeClass('hidden');
                                $(".LoadImgDiv").removeClass('hidden');
                                $(".footerContents-agreement").removeClass('hidden');
                                $(".DisclousureDiv").show();
                                var ifr = $('iframe')[0];
                                ifr.src = ifr.src
                            }
                            else {
                                $(".sign-document").addClass('hidden');
                                $(".bodyConentsDiv1").removeClass('hidden');
                                $(".bodyConentsDiv1_mobile_doc").removeClass('hidden');
                                $(".LoadImgDiv_mobile").removeClass('hidden');
                                $(".footerContents-agreement").removeClass('hidden');
                                $(".DisclousureDiv").show();
                                LoadHtmlForMobileAgreement();
                            }
                        });
                        setTimeout(function () {
                            $(".LoadImgDiv").addClass('hidden');
                            $(".LoadImgDiv_mobile").addClass('hidden');
                        }, 10000);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                }
            })
        },
        InitSignature: function () {
            var canvas = $('#signature-pad');
            var ctx = $('#signature-pad')[0].getContext('2d');
            EmployeeSurvey.signaturePad = new SignaturePad($('#signature-pad')[0]);
            function resizeCanvas() {
                var ratio = Math.max(1, 1);
                canvas.width = canvas.offsetWidth * ratio;
                canvas.height = canvas.offsetHeight * ratio;
                canvas[0].getContext("2d").scale(ratio, ratio);
            }
            resizeCanvas();
            var img = new Image();
            img.onload = function () {
                ctx.drawImage(img, 0, 0);
            };
            img.crossOrigin = 'anonymous';
            function download(dataURL, filename) {
                var blob = dataURLToBlob(dataURL);
                var url = window.URL.createObjectURL(blob);

                var a = document.createElement("a");
                a.style = "display: none";
                a.href = url;
                a.download = filename;

                document.body.appendChild(a);
                a.click();

                window.URL.revokeObjectURL(url);
            }
            function dataURLToBlob(dataURL) {
                var parts = dataURL.split(';base64,');
                var contentType = parts[0].split(":")[1];
                var raw = window.atob(parts[1]);
                var rawLength = raw.length;
                var uInt8Array = new Uint8Array(rawLength);

                for (var i = 0; i < rawLength; ++i) {
                    uInt8Array[i] = raw.charCodeAt(i);
                }

                return new Blob([uInt8Array], { type: contentType });
            }

            $('#clear').click(function () {
                EmployeeSurvey.signaturePad.clear();
            });
            $("#save-png").click(function () {
                if (EmployeeSurvey.signaturePad.isEmpty()) {
                    OpenErrorMessageNew("Error!", "Please Draw Your Signature");
                }
                else {
                    if (ContractSubmit == "True") {
                        $(".LoadImgDiv").removeClass('hidden');
                        $(".LoadImgDiv_mobile").removeClass('hidden');
                    }
                    sigclicked = true;
                    counter += 1;

                    EmployeeSurvey.SaveSignature();

                }
            })
        },
        InitEmployeeSurvey: function () {
            $(".employee_survey_btn_container").width($(".employee_per_review_container").width() + 11);
            $(".employee_per_review_container").height(window.innerHeight - 114);

            $(".LoaderWorkingDiv").hide();
            ReviewDatePicker = new Pikaday({
                field: $('#ReviewDate')[0],
                format: 'MM/DD/YYYY',
            });
            NextReviewPicker = new Pikaday({
                field: $('#NextReview')[0],
                format: 'MM/DD/YYYY',
            });

            $("#btnSaveSurvey").click(function () {
                EmployeeSurvey.SaveEmployeeReview();
            });
            $(".Knowledge_radio").click(function () {
                if (typeof ($("input[name='Knowledge']:checked").val()) != "undefined") {
                    KnowladgeVal = parseInt($("input[name='Knowledge']:checked").val());
                }
                RadioCounters();
            });
            $(".WorkQuality_radio").click(function () {
                if (typeof ($("input[name='WorkQuality']:checked").val()) != "undefined") {
                    WorkQualityVal = parseInt($("input[name='WorkQuality']:checked").val());
                }
                RadioCounters();
            });
            $(".Attendance_radio").click(function () {
                if (typeof ($("input[name='Attendance']:checked").val()) != "undefined") {
                    AttendanceVal = parseInt($("input[name='Attendance']:checked").val());
                }
                RadioCounters();
            });
            $(".Initiative_radio").click(function () {
                if (typeof ($("input[name='Initiative']:checked").val()) != "undefined") {
                    InitiativeVal = parseInt($("input[name='Initiative']:checked").val());
                }
                RadioCounters();
            });
            $(".Communication_radio").click(function () {
                if (typeof ($("input[name='Communication']:checked").val()) != "undefined") {
                    CommunicationVal = parseInt($("input[name='Communication']:checked").val());
                }
                RadioCounters();
            });
            $(".Dependability_radio").click(function () {
                if (typeof ($("input[name='Dependability']:checked").val()) != "undefined") {
                    DependabilityVal = parseInt($("input[name='Dependability']:checked").val());
                }
                RadioCounters();
            });

            $(".company-white-logo").click(function () {
                location.href = '/Dashboard'
            });
        },
        SaveEmployeeReview: function () {
            var EmployeeSignature;
            var ManagerSignature;

            var SignatureData = [];
            if (EmployeeSurvey.signaturePad != null &&
                typeof (EmployeeSurvey.signaturePad) != "undefined" && typeof (EmployeeSurvey.signaturePad.toDataURL) != "undefined") {
                SignatureData = EmployeeSurvey.signaturePad.toDataURL('image/png');
            }

            //if (UserType == "employee") {
            //    EmployeeSignature = EmployeeSurvey.signaturePad.toDataURL('image/png');
            //} else if (UserType == "manager") {
            //    ManagerSignature = EmployeeSurvey.signaturePad.toDataURL('image/png');
            //}
            console.log("Employee Signature: " + EmployeeSignature);
            console.log("Manager Signature: " + ManagerSignature);

            var url = domainurl + "/Survey/SaveEmployeeSurvey";
            var param = JSON.stringify({
                Id: $("#SurveyId").val(),
                ReviewId: ReviewId,
                ReviewedBy: ReviewedBy,
                UserId: ReviewId,
                EmpName: $("#EmpName").val(),
                JobTitle: $("#JobTitle").val(),
                Department: $("#Department").val(),
                ReviewPeriod: $("#ReviewPeriod").val(),
                StrReviewDate: $("#ReviewDate").val(),
                Manager: $("#Manager").val(),
                NextReview: $("#NextReview").val(),
                JobKnowledge: $("input[name='Knowledge']:checked").val(),
                JobKnowledgeComments: $("#JobKnowledgeComments").val(),
                WorkQuality: $("input[name='WorkQuality']:checked").val(),
                WorkQualityComments: $("#WorkQualityComments").val(),
                Attendance: $("input[name='Attendance']:checked").val(),
                AttendanceComments: $("#AttendanceComments").val(),
                Initiative: $("input[name='Initiative']:checked").val(),
                InitiativeComments: $("#InitiativeComments").val(),
                CommunicationSkills: $("input[name='Communication']:checked").val(),
                CommunicationSkillsComments: $("#CommunicationSkillsComments").val(),
                Dependability: $("input[name='Dependability']:checked").val(),
                DependabilityComments: $("#DependabilityComments").val(),
                OverallRating: $("#OverAllRating").text(),
                AdditionalComments: $("#AdditionalComments").val(),
                Goals: $("#Goals").val(),
                UserType: UserType,

                //EmpSignature: $("#EmployeeSignature").val(),
                //StrEmpSignatureDate: $("#EmployeeSignatureDate").val(),
                //ManagerSignature: $("#ManagerSignatureDate").val(),
                //StrManagerSignatureDate: $("#ManagerSignatureDate").val(),

                //EmployeeSignature: EmployeeSignature,
                //ManagerSignature: EmployeeSurvey.signaturePad.toDataURL('image/png'),
                Signature: SignatureData,

            });

            $.ajax({
                type: "POST",
                ajaxStart: $(".AddInvoiceLoader").removeClass('hidden'),
                url: url,
                data: param,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                cache: false,
                success: function (response) {
                    $(".AddInvoiceLoader").addClass('hidden');
                    if (response.result) {
                        OpenSuccessMessageNew("Success!", response.message, function () {
                            $(".close").click();
                        });
                    }
                },

                error: function (jqXHR, textStatus, errorThrown) {
                    $(".AddInvoiceLoader").addClass('hidden');
                }
            });
        } 
    } 

    $(document).ready(function () {
        EmployeeSurvey.InitEmployeeSurvey();

        if (typeof ($('#signature-pad')[0]) != "undefined") {
            EmployeeSurvey.InitSignature();
        }
    });
    $(window).resize(function(){
        $(".employee_survey_btn_container").width($(".employee_per_review_container").width()+ 11);
    })
</script>

<div class="hidden" style="display:none;visibility:hidden">
    <input type="hidden" id="SurveyId" value="@Model.Id" />
    <input type="hidden" id="ReviewId" value="@Model.ReviewId" />
</div>

<div class="employee_per_review_container">
    <div class="review_contents">
        <div class="epr_header"> Employee Performance Review </div>
        <div class="epr_sub_header"> Employee Information </div>
        <table class="employee_info_table">
            <tr>
                <td>Name</td>
                <td><input type="text" @(inputClass) id="EmpName" value="@Model.EmpName" /></td>
                <td>Date</td>
                <td><input type="text" @(inputClass) id="ReviewDate" value="@(Model.ReviewDate.HasValue? HS.Framework.DateTimeExtension.UTCToClientTime(Model.ReviewDate.Value).ToString("MM/dd/yyyy"):"")" /></td>
            </tr>
            <tr>
                <td>Job Title</td>
                <td><input type="text" @(inputClass) id="JobTitle" value="@Model.JobTitle" /></td>
                <td>Manager</td>
                <td><input type="text" @(inputClass) id="Manager" value="@Model.Manager" /></td>
            </tr>
            <tr>
                <td>Department</td>
                <td><input type="text" @(inputClass) id="Department" value="@(Model.Department != "-1"? Model.Department:"")" /></td>
                <td>Next Review</td>
                <td><input type="text" @(inputClass) id="NextReview" value="@(Model.NextReview.HasValue? HS.Framework.DateTimeExtension.UTCToClientTime(Model.NextReview.Value).ToString("MM/dd/yyyy"):"")" /></td>
            </tr> 
            <tr>
                <td>Review Period</td>
                <td><input type="text" id="ReviewPeriod" @(inputClass) value="@Model.ReviewPeriod" /></td>
                <td colspan="2"></td>
            </tr>
        </table>
        <div class="epr_sub_header"> Ratings </div>
        <table class="ratings_table">
            <tr>
                <td colspan="2"></td>
                <td>1 = Poor</td>
                <td>2 = Fair</td>
                <td>3 = Satisfactory</td>
                <td>4 = Good</td>
                <td>5 = Excellent</td>
            </tr>
            <tr>
                <td colspan="2">Job Knowledge</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.JobKnowledge == 1 ? "checked" : "") name="Knowledge" class="Knowledge_radio" />
                        <span class="checkmark"></span>
                    </label>
                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.JobKnowledge == 2 ? "checked" : "") name="Knowledge" class="Knowledge_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.JobKnowledge == 3 ? "checked" : "") name="Knowledge" class="Knowledge_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.JobKnowledge == 4 ? "checked" : "") name="Knowledge" class="Knowledge_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.JobKnowledge == 5 ? "checked" : "") name="Knowledge" class="Knowledge_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="JobKnowledgeComments" value="@Model.JobKnowledgeComments" /></td>
            </tr>
            <tr>
                <td colspan="2">Work Quality</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.WorkQuality == 1 ? "checked" : "") name="WorkQuality" class="WorkQuality_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.WorkQuality == 2 ? "checked" : "") name="WorkQuality" class="WorkQuality_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.WorkQuality == 3 ? "checked" : "") name="WorkQuality" class="WorkQuality_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.WorkQuality == 4 ? "checked" : "") name="WorkQuality" class="WorkQuality_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.WorkQuality == 5 ? "checked" : "") name="WorkQuality" class="WorkQuality_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="WorkQualityComments" value="@Model.WorkQualityComments" /></td>
            </tr>
            <tr>
                <td colspan="2">Attendance/Punctuality</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.Attendance == 1 ? "checked" : "") name="Attendance" class="Attendance_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.Attendance == 2 ? "checked" : "") name="Attendance" class="Attendance_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.Attendance == 3 ? "checked" : "") name="Attendance" class="Attendance_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.Attendance == 4 ? "checked" : "") name="Attendance" class="Attendance_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.Attendance == 5 ? "checked" : "") name="Attendance" class="Attendance_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="AttendanceComments" value="@Model.AttendanceComments" /></td>
            </tr>
            <tr>
                <td colspan="2">Initiative</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.Initiative == 1 ? "checked" : "") name="Initiative" class="Initiative_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.Initiative == 2 ? "checked" : "") name="Initiative" class="Initiative_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.Initiative == 3 ? "checked" : "") name="Initiative" class="Initiative_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.Initiative == 4 ? "checked" : "") name="Initiative" class="Initiative_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.Initiative == 5 ? "checked" : "") name="Initiative" class="Initiative_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="InitiativeComments" value="@Model.InitiativeComments" /></td>
            </tr>
            <tr>
                <td colspan="2">Communication/Listening Skills</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.CommunicationSkills == 1 ? "checked" : "") name="Communication" class="Communication_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.CommunicationSkills == 2 ? "checked" : "") name="Communication" class="Communication_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.CommunicationSkills == 3 ? "checked" : "") name="Communication" class="Communication_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.CommunicationSkills == 4 ? "checked" : "") name="Communication" class="Communication_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.CommunicationSkills == 5 ? "checked" : "") name="Communication" class="Communication_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="CommunicationSkillsComments" value="@Model.CommunicationSkillsComments" /></td>
            </tr>
            <tr>
                <td colspan="2">Dependability</td>
                <td>
                    <label class="radio_check">
                        <input value="1" type="radio" @(inputClass) @(Model.Dependability == 1 ? "checked" : "") name="Dependability" class="Dependability_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="2" type="radio" @(inputClass) @(Model.Dependability == 2 ? "checked" : "") name="Dependability" class="Dependability_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="3" type="radio" @(inputClass) @(Model.Dependability == 3 ? "checked" : "") name="Dependability" class="Dependability_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="4" type="radio" @(inputClass) @(Model.Dependability == 4 ? "checked" : "") name="Dependability" class="Dependability_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
                <td>
                    <label class="radio_check">
                        <input value="5" type="radio" @(inputClass) @(Model.Dependability == 5 ? "checked" : "") name="Dependability" class="Dependability_radio" />
                        <span class="checkmark"></span>
                    </label>

                </td>
            </tr>
            <tr class="rating_comments">
                <td>Comments</td>
                <td colspan="6"><input type="text" @(inputClass) id="DependabilityComments" value="@Model.DependabilityComments" /></td>
            </tr>
            <tr>
                <td colspan="4">Overall Rating <i>(see next page for directions)</i></td>
                <td colspan="3"><span id="OverAllRating">@Model.OverallRating</span></td>
            </tr>
        </table>
        <div class="epr_sub_header"> Evaluation </div>
        <div class="epr_normal_text">ADDITIONAL COMMENTS</div>
        <textarea @(inputClass) id="AdditionalComments">@Model.AdditionalComments</textarea>
        <div class="epr_goals">
            <div class="epr_goals_left">
                <div>GOALS</div>
                <i>(as agreed upon by employee and manager)</i>
            </div>
            <div class="epr_goals_right">
                <textarea @(inputClass) id="Goals">@Model.Goals</textarea>
            </div>
        </div>
        <div class="epr_sub_header"> Verification of Review </div>
        <div class="epr_normal_text"><i>By signing this form, you confirm that you have discussed this review in detail with your supervisor. Signing this form does not necessarily indicate that you agree with this evaluation.</i></div>
        <table class="verification_review_table">
            <tr>
                <td>Employee Signature</td>
                <td>
                    @if (ViewBag.CurrentUserType == "employee" && string.IsNullOrWhiteSpace(Model.EmpSignature))
                    {
                        <canvas id="signature-pad" class="signature-pad employeeSignature" width=300 height=100 style="float:left;border: 1px solid;"></canvas>
                        <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                    }
                    else if( !string.IsNullOrWhiteSpace(Model.EmpSignature))
                    {
                        <img style="width:300px; height:100px;" src="@Model.EmpSignature" />
                    }
                    else
                    {
                        <div style="width:300px; height:100px;">

                        </div>
                    }

                </td>
                <td>Date</td>
                <td><input type="text" disabled id="EmployeeSignatureDate" value="@((Model.EmpSignatureDate.HasValue && Model.EmpSignatureDate != new DateTime())? HS.Framework.DateTimeExtension.UTCToClientTime(Model.EmpSignatureDate.Value).ToString("MM/dd/yyyy"):"")" /></td>
            </tr>
            <tr>
                <td>Manager Signature</td>
                <td>
                    @if (ViewBag.CurrentUserType == "manager" && string.IsNullOrWhiteSpace(Model.ManagerSignature))
                    {
                        <canvas id="signature-pad" class="signature-pad managerSignature" width=300 height=100 style="float:left;border: 1px solid;"></canvas>
                        <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>
                    }
                    else if (!string.IsNullOrWhiteSpace(Model.ManagerSignature))
                    {
                        <img style="width:300px; height:100px;" src="@Model.ManagerSignature" />
                    }
                    else
                    {
                        <div style="width:300px; height:100px;">

                        </div>
                    }
                </td>
                <td>Date</td>
                <td><input type="text" disabled id="ManagerSignatureDate" value="@((Model.ManagerSignatureDate.HasValue && Model.ManagerSignatureDate != new DateTime())? HS.Framework.DateTimeExtension.UTCToClientTime(Model.ManagerSignatureDate.Value).ToString("MM/dd/yyyy"):"")" /></td>
            </tr>
        </table>
        <div class="epr_header_big">Ratings Categories Defined</div>
        <div class="erp_header_normal">Job Knowledge</div>
        <div class="erp_normal_text">Knowledge of company processes, products, software, etc.… How familiar is the employee with DFW Security? Add comments of strong points and/or areas for improvement.</div>
        <div class="erp_header_normal erp_margin_top">Work Quality</div>
        <div class="erp_normal_text">How well are duties handled? Are adequate/helpful notes being left in accounts accessed, tasks being created when needed, calls being answered in a timely and professional manner, etc.…? </div>
        <div class="erp_header_normal erp_margin_top">Attendance/Punctuality</div>
        <div class="erp_normal_text">Is the employee consistently arriving for work and on time? Is the employee consistently returning from lunch on time?</div>
        <div class="erp_header_normal erp_margin_top">Initiative</div>
        <div class="erp_normal_text">Is the employee a self-starter? Do they take on tasks without being asked because they need to be done? Will they find a solution to a problem before bringing it up?</div>
        <div class="erp_header_normal erp_margin_top">Communication/Listening Skills</div>
        <div class="erp_normal_text">Does the employee effectively communicate with customers and co-workers? Are they listening and retaining information presented to them?</div>
        <div class="erp_header_normal erp_margin_top">Job Dependability</div>
        <div class="erp_normal_text">Is the employee reliable in completing tasks in a timely manner? Can you give the employee a task and know that it will be completed accurately? </div>
        <div class="epr_header_big erp_top_margin">Overall Rating Calculation</div>
        <div class="erp_normal_text">Total ratings above to get a total number of points and use this chart for overall rating</div>
        <div class="erp_overall_rating_list">
            <ul>
                <li><b>Poor (6-11):</b> immediate improvement must be made for employment to continue</li>
                <li><b>Fair (12-17):</b> improvement needed</li>
                <li><b>Average (18-23):</b> performance meets expectations  </li>
                <li><b>Above Average (24-30):</b> performance exceeds expectations</li>
            </ul>
        </div>
    </div>
    

    <div class="sign-document hidden">
        @*<div class="wrapper">
            <canvas id="signature-pad" class="signature-pad" width=300 height=100 style="float:left;"></canvas>
        </div>
        <button class="btn all_button" id="save-png"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add to Review</button>
        <button class="btn all_button" id="clear"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear</button>*@
    </div>

    <div class="employee_survey_btn_container"><button class="btn" id="btnSaveSurvey"><i class="fa fa-floppy-o" aria-hidden="true"></i>  Save</button></div>

    <div class="AddInvoiceLoader hidden">
        <div class='invoice-loader'><div><div class="lds-css ng-scope"><div style="margin:auto; z-index:99;" class="lds-double-ring"><div></div><div></div></div></div></div></div>
        @*<div class='invoice-loader'><div><div class='lds-css ng-scope'><div style='margin:auto; z-index:99;' class='lds-double-ring'><div></div><div></div></div></div></div></div>*@
    </div>
</div>


